(function(A){A.fn.each2===void 0&&A.fn.extend({each2:function(D){for(var E=A([0]),B=-1,C=this.length;C>++B&&(E.context=E[0]=this[B])&&D.call(E[0],B,E)!==!1;){}return this}})})(jQuery),function(As,Aq){function Ap(D,B){for(var C=0,A=B.length;A>C;C+=1){if(An(D,B[C])){return C}}return -1}function Am(){var A=As(Ao);A.appendTo("body");var B={width:A.width()-A[0].clientWidth,height:A.height()-A[0].clientHeight};return A.remove(),B}function An(B,A){return B===A?!0:B===Aq||A===Aq?!1:null===B||null===A?!1:B.constructor===String?B+""==A+"":A.constructor===String?A+""==B+"":!1}function Ac(C,D){var A,B,E;if(null===C||1>C.length){return[]}for(A=C.split(D),B=0,E=A.length;E>B;B+=1){A[B]=As.trim(A[B])}return A}function Ad(A){return A.outerWidth(!1)-A.width()}function Aa(B){var A="keyup-change-value";B.on("keydown",function(){As.data(B,A)===Aq&&As.data(B,A,B.val())}),B.on("keyup",function(){var C=As.data(B,A);C!==Aq&&B.val()!==C&&(As.removeData(B,A),B.trigger("keyup-change"))})}function Ab(A){A.on("mousemove",function(C){var B=Al;(B===Aq||B.x!==C.pageX||B.y!==C.pageY)&&As(C.target).trigger("mousemove-filtered",C)})}function Ag(D,C,A){A=A||Aq;var B;return function(){var E=arguments;window.clearTimeout(B),B=window.setTimeout(function(){C.apply(A,E)},D)}}function Ah(C){var B,A=!1;return function(){return A===!1&&(B=C(),A=!0),B}}function Ae(C,A){var B=Ag(C,function(D){A.trigger("scroll-debounced",D)});A.on("scroll",function(D){Ap(D.target,A.get())>=0&&B(D)})}function Af(A){A[0]!==document.activeElement&&window.setTimeout(function(){var B,C=A[0],D=A.val().length;A.focus(),A.is(":visible")&&C===document.activeElement&&(C.setSelectionRange?C.setSelectionRange(D,D):C.createTextRange&&(B=C.createTextRange(),B.collapse(!1),B.select()))},0)}function Y(C){C=As(C)[0];var D=0,A=0;if("selectionStart" in C){D=C.selectionStart,A=C.selectionEnd-D}else{if("selection" in document){C.focus();var B=document.selection.createRange();A=document.selection.createRange().text.length,B.moveStart("character",-C.value.length),D=B.text.length-A}}return{offset:D,length:A}}function Z(A){A.preventDefault(),A.stopPropagation()}function X(A){A.preventDefault(),A.stopImmediatePropagation()}function S(A){if(!Ak){var B=A[0].currentStyle||window.getComputedStyle(A[0],null);Ak=As(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:B.fontSize,fontFamily:B.fontFamily,fontStyle:B.fontStyle,fontWeight:B.fontWeight,letterSpacing:B.letterSpacing,textTransform:B.textTransform,whiteSpace:"nowrap"}),Ak.attr("class","select2-sizer"),As("body").append(Ak)}return Ak.text(A.val()),Ak.width()}function Q(D,E,B){var C,A,F=[];C=D.attr("class"),C&&(C=""+C,As(C.split(" ")).each2(function(){0===this.indexOf("select2-")&&F.push(this)})),C=E.attr("class"),C&&(C=""+C,As(C.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(A=B(this),A&&F.push(this))})),D.attr("class",F.join(" "))}function R(E,D,B,C){var F=E.toUpperCase().indexOf(D.toUpperCase()),A=D.length;return 0>F?(B.push(C(E)),Aq):(B.push(C(E.substring(0,F))),B.push("<span class='select2-match'>"),B.push(C(E.substring(F,F+A))),B.push("</span>"),B.push(C(E.substring(F+A,E.length))),Aq)}function V(F){var B,C=0,G=null,A=F.quietMillis||100,D=F.url,E=this;return function(H){window.clearTimeout(B),B=window.setTimeout(function(){C+=1;var J=C,I=F.data,c=D,a=F.transport||As.fn.select2.ajaxDefaults.transport,b={type:F.type||"GET",cache:F.cache||!1,jsonpCallback:F.jsonpCallback||Aq,dataType:F.dataType||"json"},K=As.extend({},As.fn.select2.ajaxDefaults.params,b);I=I?I.call(E,H.term,H.page,H.context):null,c="function"==typeof c?c.call(E,H.term,H.page,H.context):c,null!==G&&G.abort(),F.params&&(As.isFunction(F.params)?As.extend(K,F.params.call(E)):As.extend(K,F.params)),As.extend(K,{url:c,dataType:F.dataType,data:I,success:function(e){if(!(C>J)){var d=F.results(e,H.page);H.callback(d)}}}),G=a.call(E,K)},A)}}function W(E){var C,F,B=E,A=function(G){return""+G.text};As.isArray(B)&&(F=B,B={results:F}),As.isFunction(B)===!1&&(F=B,B=function(){return F});var D=B();return D.text&&(A=D.text,As.isFunction(A)||(C=D.text,A=function(G){return G[C]})),function(I){var G,H=I.term,J={results:[]};return""===H?(I.callback(B()),Aq):(G=function(c,K){var e,a;if(c=c[0],c.children){e={};for(a in c){c.hasOwnProperty(a)&&(e[a]=c[a])}e.children=[],As(c.children).each2(function(f,d){G(d,e.children)}),(e.children.length||I.matcher(H,A(e),c))&&K.push(e)}else{I.matcher(H,A(c),c)&&K.push(c)}},As(B().results).each2(function(c,K){G(K,J.results)}),I.callback(J),Aq)}}function T(B){var A=As.isFunction(B);return function(D){var E=D.term,C={results:[]};As(A?B():B).each(function(){var G=this.text!==Aq,F=G?this.text:this;(""===E||D.matcher(E,F))&&C.results.push(G?this:{id:this,text:this})}),D.callback(C)}}function U(A){if(As.isFunction(A)){return !0}if(!A){return !1}throw Error("formatterName must be a function or a falsy value")}function O(A){return As.isFunction(A)?A():A}function P(A){var B=0;return As.each(A,function(D,C){C.children?B+=P(C.children):B++}),B}function M(H,G,K,A){var D,E,B,C,F,I=H,J=!1;if(!A.createSearchChoice||!A.tokenSeparators||1>A.tokenSeparators.length){return Aq}for(;;){for(E=-1,B=0,C=A.tokenSeparators.length;C>B&&(F=A.tokenSeparators[B],E=H.indexOf(F),!(E>=0));B++){}if(0>E){break}if(D=H.substring(0,E),H=H.substring(E+F.length),D.length>0&&(D=A.createSearchChoice(D,G),D!==Aq&&null!==D&&A.id(D)!==Aq&&null!==A.id(D))){for(J=!1,B=0,C=G.length;C>B;B++){if(An(A.id(D),A.id(G[B]))){J=!0;break}}J||K(D)}}return I!==H?H:Aq}function N(B,C){var A=function(){};return A.prototype=new B,A.prototype.constructor=A,A.prototype.parent=B.prototype,A.prototype=As.extend(A.prototype,C),A}if(window.Select2===Aq){var Ar,Av,L,At,Au,Ak,Al,Ai,Aj,Ar={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(A){switch(A=A.which?A.which:A){case Ar.LEFT:case Ar.RIGHT:case Ar.UP:case Ar.DOWN:return !0}return !1},isControl:function(B){var A=B.which;switch(A){case Ar.SHIFT:case Ar.CTRL:case Ar.ALT:return !0}return B.metaKey?!0:!1},isFunctionKey:function(A){return A=A.which?A.which:A,A>=112&&123>=A}},Ao="<div class='select2-measure-scrollbar'></div>";Ai=As(document),Au=function(){var A=1;return function(){return A++}}(),Ai.on("mousemove",function(A){Al={x:A.pageX,y:A.pageY}}),Av=N(Object,{bind:function(B){var A=this;return function(){B.apply(A,arguments)}},init:function(E){var B,C,A,D,F=".select2-results";this.opts=E=this.prepareOpts(E),this.id=E.id,E.element.data("select2")!==Aq&&null!==E.element.data("select2")&&this.destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(E.element.attr("id")||"autogen"+Au()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=Ah(function(){return E.element.closest("body")}),Q(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(O(E.containerCss)),this.container.addClass(O(E.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(O(E.dropdownCssClass)),this.dropdown.data("select2",this),this.results=B=this.container.find(F),this.search=C=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),Ab(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",F,this.bind(this.highlightUnderEvent)),Ae(80,this.results),this.dropdown.on("scroll-debounced",F,this.bind(this.loadMoreIfNeeded)),As(this.container).on("change",".select2-input",function(G){G.stopPropagation()}),As(this.dropdown).on("change",".select2-input",function(G){G.stopPropagation()}),As.fn.mousewheel&&B.mousewheel(function(J,H,I,G){var K=B.scrollTop();G>0&&0>=K-G?(B.scrollTop(0),Z(J)):0>G&&B.get(0).scrollHeight-B.scrollTop()+G<=B.height()&&(B.scrollTop(B.get(0).scrollHeight-B.height()),Z(J))}),Aa(C),C.on("keyup-change input paste",this.bind(this.updateResults)),C.on("focus",function(){C.addClass("select2-focused")}),C.on("blur",function(){C.removeClass("select2-focused")}),this.dropdown.on("mouseup",F,this.bind(function(G){As(G.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(G),this.selectHighlighted(G))})),this.dropdown.on("click mouseup mousedown",function(G){G.stopPropagation()}),As.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==E.maximumInputLength&&this.search.attr("maxlength",E.maximumInputLength);var A=E.element.prop("disabled");A===Aq&&(A=!1),this.enable(!A);var D=E.element.prop("readonly");D===Aq&&(D=!1),this.readonly(D),Aj=Aj||Am(),this.autofocus=E.element.prop("autofocus"),E.element.prop("autofocus",!1),this.autofocus&&this.focus()},destroy:function(){var A=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),A!==Aq&&(A.container.remove(),A.dropdown.remove(),A.opts.element.removeClass("select2-offscreen").removeData("select2").off(".select2").attr({tabindex:this.elementTabIndex}).prop("autofocus",this.autofocus||!1).show())},optionToData:function(A){return A.is("option")?{id:A.prop("value"),text:A.text(),element:A.get(),css:A.attr("class"),disabled:A.prop("disabled"),locked:An(A.attr("locked"),"locked")}:A.is("optgroup")?{text:A.attr("label"),children:[],element:A.get(),css:A.attr("class")}:Aq},prepareOpts:function(E){var B,C,F,A,D=this;if(B=E.element,"select"===B.get(0).tagName.toLowerCase()&&(this.select=C=E.element),C&&As.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in E){throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}}),E=As.extend({},{populateResults:function(H,I,K){var G,J=this.opts.id;G=function(z,a,u){var h,l,x,v,w,c,f,g,b,y;for(z=E.sortResults(z,a,K),h=0,l=z.length;l>h;h+=1){x=z[h],w=x.disabled===!0,v=!w&&J(x)!==Aq,c=x.children&&x.children.length>0,f=As("<li></li>"),f.addClass("select2-results-dept-"+u),f.addClass("select2-result"),f.addClass(v?"select2-result-selectable":"select2-result-unselectable"),w&&f.addClass("select2-disabled"),c&&f.addClass("select2-result-with-children"),f.addClass(D.opts.formatResultCssClass(x)),g=As(document.createElement("div")),g.addClass("select2-result-label"),y=E.formatResult(x,g,K,D.opts.escapeMarkup),y!==Aq&&g.html(y),f.append(g),c&&(b=As("<ul></ul>"),b.addClass("select2-result-sub"),G(x.children,b,u+1),f.append(b)),f.data("select2-data",x),a.append(f)}},G(I,H,0)}},As.fn.select2.defaults,E),"function"!=typeof E.id&&(F=E.id,E.id=function(G){return G[F]}),As.isArray(E.element.data("select2Tags"))){if("tags" in E){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+E.element.attr("id")}E.tags=E.element.data("select2Tags")}if(C?(E.query=this.bind(function(J){var G,H,K,I={results:[],more:!1},a=J.term;K=function(f,e){var c;f.is("option")?J.matcher(a,f.text(),f)&&e.push(D.optionToData(f)):f.is("optgroup")&&(c=D.optionToData(f),f.children().each2(function(g,d){K(d,c.children)}),c.children.length>0&&e.push(c))},G=B.children(),this.getPlaceholder()!==Aq&&G.length>0&&(H=G[0],""===As(H).text()&&(G=G.not(H))),G.each2(function(d,c){K(c,I.results)}),J.callback(I)}),E.id=function(G){return G.id},E.formatResultCssClass=function(G){return G.css}):"query" in E||("ajax" in E?(A=E.element.data("ajax-url"),A&&A.length>0&&(E.ajax.url=A),E.query=V.call(E.element,E.ajax)):"data" in E?E.query=W(E.data):"tags" in E&&(E.query=T(E.tags),E.createSearchChoice===Aq&&(E.createSearchChoice=function(G){return{id:G,text:G}}),E.initSelection===Aq&&(E.initSelection=function(G,H){var I=[];As(Ac(G.val(),E.separator)).each(function(){var K=this,a=this,J=E.tags;As.isFunction(J)&&(J=J()),As(J).each(function(){return An(this.id,K)?(a=this.text,!1):Aq}),I.push({id:K,text:a})}),H(I)}))),"function"!=typeof E.query){throw"query function not defined for Select2 "+E.element.attr("id")}return E},monitorSource:function(){var A,B=this.opts.element;B.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),A=this.bind(function(){var C,D=B.prop("disabled");D===Aq&&(D=!1),this.enable(!D);var C=B.prop("readonly");C===Aq&&(C=!1),this.readonly(C),Q(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(O(this.opts.containerCssClass)),Q(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(O(this.opts.dropdownCssClass))}),B.on("propertychange.select2 DOMAttrModified.select2",A),this.mutationCallback===Aq&&(this.mutationCallback=function(C){C.forEach(A)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(B.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(A){var B=As.Event("select2-selecting",{val:this.id(A),object:A});return this.opts.element.trigger(B),!B.isDefaultPrevented()},triggerChange:function(A){A=A||{},A=As.extend({},A,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(A),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var B=this._enabled&&!this._readonly,A=!B;return B===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",A),this.close(),this.enabledInterface=B,!0)},enable:function(A){return A===Aq&&(A=!0),this._enabled===A?!1:(this._enabled=A,this.opts.element.prop("disabled",!A),this.enableInterface(),!0)},readonly:function(A){return A===Aq&&(A=!1),this._readonly===A?!1:(this._readonly=A,this.opts.element.prop("readonly",A),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var D,A,B,E,k=this.dropdown,u=this.container.offset(),x=this.container.outerHeight(!1),y=this.container.outerWidth(!1),v=k.outerHeight(!1),w=As(window).scrollLeft()+As(window).width(),G=As(window).scrollTop()+As(window).height(),H=u.top+x,F=u.left,K=G>=H+v,a=u.top-v>=this.body().scrollTop(),I=k.outerWidth(!1),J=w>=F+I,C=k.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(E=As(".select2-results",k)[0],k.addClass("select2-drop-auto-width"),k.css("width",""),I=k.outerWidth(!1)+(E.scrollHeight===E.clientHeight?0:Aj.width),I>y?y=I:I=y,J=w>=F+I):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(D=this.body().offset(),H-=D.top,F-=D.left),C?(A=!0,!a&&K&&(A=!1)):(A=!1,!K&&a&&(A=!0)),J||(F=u.left+y-I),A?(H=u.top-v,this.container.addClass("select2-drop-above"),k.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),k.removeClass("select2-drop-above")),B=As.extend({top:H,left:F,width:y},O(this.opts.dropdownCss)),k.css(B)},shouldOpen:function(){var A;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(A=As.Event("select2-opening"),this.opts.element.trigger(A),!A.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){function A(){return{width:Math.max(document.documentElement.scrollWidth,As(window).width()),height:Math.max(document.documentElement.scrollHeight,As(window).height())}}var G,E=this.containerId,F="scroll."+E,B="resize."+E,C="orientationchange."+E;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),G=As("#select2-drop-mask"),0==G.length&&(G=As(document.createElement("div")),G.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),G.hide(),G.appendTo(this.body()),G.on("mousedown touchstart",function(I){var H,J=As("#select2-drop");J.length>0&&(H=J.data("select2"),H.opts.selectOnBlur&&H.selectHighlighted({noFocus:!0}),H.close(),I.preventDefault(),I.stopPropagation())})),this.dropdown.prev()[0]!==G[0]&&this.dropdown.before(G),As("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),G.css(A()),G.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var D=this;this.container.parents().add(window).each(function(){As(this).on(B+" "+F+" "+C,function(){As("#select2-drop-mask").css(A()),D.positionDropdown()})})},close:function(){if(this.opened()){var C=this.containerId,D="scroll."+C,A="resize."+C,B="orientationchange."+C;this.container.parents().add(window).each(function(){As(this).off(D).off(A).off(B)}),this.clearDropdownAlignmentPreference(),As("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(As.Event("select2-close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return O(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var H,A,F,G,C,D,B,E=this.results;if(A=this.highlight(),!(0>A)){if(0==A){return E.scrollTop(0),Aq}H=this.findHighlightableChoices().find(".select2-result-label"),F=As(H[A]),G=F.offset().top+F.outerHeight(!0),A===H.length-1&&(B=E.find("li.select2-more-results"),B.length>0&&(G=B.offset().top+B.outerHeight(!0))),C=E.offset().top+E.outerHeight(!0),G>C&&E.scrollTop(E.scrollTop()+(G-C)),D=F.offset().top-E.offset().top,0>D&&"none"!=F.css("display")&&E.scrollTop(E.scrollTop()+D)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(C){for(var D=this.findHighlightableChoices(),A=this.highlight();A>-1&&D.length>A;){A+=C;var B=As(D[A]);if(B.hasClass("select2-result-selectable")&&!B.hasClass("select2-disabled")&&!B.hasClass("select2-selected")){this.highlight(A);break}}},highlight:function(C){var B,D,A=this.findHighlightableChoices();return 0===arguments.length?Ap(A.filter(".select2-highlighted")[0],A.get()):(C>=A.length&&(C=A.length-1),0>C&&(C=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),B=As(A[C]),B.addClass("select2-highlighted"),this.ensureHighlightVisible(),D=B.data("select2-data"),D&&this.opts.element.trigger({type:"select2-highlight",val:this.id(D),choice:D}),Aq)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(B){var C=As(B.target).closest(".select2-result-selectable");if(C.length>0&&!C.is(".select2-highlighted")){var A=this.findHighlightableChoices();this.highlight(A.index(C))}else{0==C.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")}},loadMoreIfNeeded:function(){var E,F=this.results,D=F.find("li.select2-more-results"),C=this.resultsPage+1,G=this,A=this.search.val(),B=this.context;0!==D.length&&(E=D.offset().top-F.offset().top-F.height(),this.opts.loadMorePadding>=E&&(D.addClass("select2-active"),this.opts.query({element:this.opts.element,term:A,page:C,context:B,matcher:this.opts.matcher,callback:this.bind(function(H){G.opened()&&(G.opts.populateResults.call(this,F,H.results,{term:A,page:C,context:B}),G.postprocessResults(H,!1,!1),H.more===!0?(D.detach().appendTo(F).text(G.opts.formatLoadMore(C+1)),window.setTimeout(function(){G.loadMoreIfNeeded()},10)):D.remove(),G.positionDropdown(),G.resultsPage=C,G.context=H.context)})})))},tokenize:function(){},updateResults:function(I){function G(){A.scrollTop(0),a.removeClass("select2-active"),D.positionDropdown()}function H(b){A.html(b),G()}var K,E,a=this.search,A=this.results,J=this.opts,D=this,B=a.val(),C=As.data(this.container,"select2-last-term");if((I===!0||!C||!An(B,C))&&(As.data(this.container,"select2-last-term",B),I===!0||this.showSearchInput!==!1&&this.opened())){var F=this.getMaximumSelectionSize();if(F>=1&&(K=this.data(),As.isArray(K)&&K.length>=F&&U(J.formatSelectionTooBig,"formatSelectionTooBig"))){return H("<li class='select2-selection-limit'>"+J.formatSelectionTooBig(F)+"</li>"),Aq}if(a.val().length<J.minimumInputLength){return U(J.formatInputTooShort,"formatInputTooShort")?H("<li class='select2-no-results'>"+J.formatInputTooShort(a.val(),J.minimumInputLength)+"</li>"):H(""),I&&this.showSearch(!0),Aq}if(J.maximumInputLength&&a.val().length>J.maximumInputLength){return U(J.formatInputTooLong,"formatInputTooLong")?H("<li class='select2-no-results'>"+J.formatInputTooLong(a.val(),J.maximumInputLength)+"</li>"):H(""),Aq}J.formatSearching&&0===this.findHighlightableChoices().length&&H("<li class='select2-searching'>"+J.formatSearching()+"</li>"),a.addClass("select2-active"),E=this.tokenize(),E!=Aq&&null!=E&&a.val(E),this.resultsPage=1,J.query({element:J.element,term:a.val(),page:this.resultsPage,context:null,matcher:J.matcher,callback:this.bind(function(b){var c;return this.opened()?(this.context=b.context===Aq?null:b.context,this.opts.createSearchChoice&&""!==a.val()&&(c=this.opts.createSearchChoice.call(null,a.val(),b.results),c!==Aq&&null!==c&&D.id(c)!==Aq&&null!==D.id(c)&&0===As(b.results).filter(function(){return An(D.id(this),D.id(c))}).length&&b.results.unshift(c)),0===b.results.length&&U(J.formatNoMatches,"formatNoMatches")?(H("<li class='select2-no-results'>"+J.formatNoMatches(a.val())+"</li>"),Aq):(A.empty(),D.opts.populateResults.call(this,A,b.results,{term:a.val(),page:this.resultsPage,context:null}),b.more===!0&&U(J.formatLoadMore,"formatLoadMore")&&(A.append("<li class='select2-more-results'>"+D.opts.escapeMarkup(J.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){D.loadMoreIfNeeded()},10)),this.postprocessResults(b,I),G(),this.opts.element.trigger({type:"select2-loaded",data:b}),Aq)):(this.search.removeClass("select2-active"),Aq)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){Af(this.search)},selectHighlighted:function(D){var B=this.highlight(),C=this.results.find(".select2-highlighted"),A=C.closest(".select2-result").data("select2-data");A&&(this.highlight(B),this.onSelect(A,D))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function B(){var F,D,E,G,C;if("off"===this.opts.width){return null}if("element"===this.opts.width){return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"}if("copy"===this.opts.width||"resolve"===this.opts.width){if(F=this.opts.element.attr("style"),F!==Aq){for(D=F.split(";"),G=0,C=D.length;C>G;G+=1){if(E=D[G].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==E&&E.length>=1){return E[1]}}}return F=this.opts.element.css("width"),F&&F.length>0?F:"resolve"===this.opts.width?0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return As.isFunction(this.opts.width)?this.opts.width():this.opts.width}var A=B.call(this);null!==A&&this.container.css("width",A)}}),L=N(Av,{createContainer:function(){var A=As(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return A},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var A,B;this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),A=this.search.get(0),A.createTextRange&&(B=A.createTextRange(),B.collapse(!1),B.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(As.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var A,B=this.container,C=this.dropdown;this.showSearch(!1),this.selection=A=B.find(".select2-choice"),this.focusser=B.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+Au()),As("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(D){if(this.isInterfaceEnabled()){if(D.which===Ar.PAGE_UP||D.which===Ar.PAGE_DOWN){return Z(D),Aq}switch(D.which){case Ar.UP:case Ar.DOWN:return this.moveHighlight(D.which===Ar.UP?-1:1),Z(D),Aq;case Ar.ENTER:return this.selectHighlighted(),Z(D),Aq;case Ar.TAB:return this.selectHighlighted({noFocus:!0}),Aq;case Ar.ESC:return this.cancel(D),Z(D),Aq}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(D){return !this.isInterfaceEnabled()||D.which===Ar.TAB||Ar.isControl(D)||Ar.isFunctionKey(D)||D.which===Ar.ESC?Aq:this.opts.openOnEnter===!1&&D.which===Ar.ENTER?(Z(D),Aq):D.which==Ar.DOWN||D.which==Ar.UP||D.which==Ar.ENTER&&this.opts.openOnEnter?(this.open(),Z(D),Aq):D.which==Ar.DELETE||D.which==Ar.BACKSPACE?(this.opts.allowClear&&this.clear(),Z(D),Aq):Aq})),Aa(this.focusser),this.focusser.on("keyup-change input",this.bind(function(D){D.stopPropagation(),this.opened()||this.open()})),A.on("mousedown","abbr",this.bind(function(D){this.isInterfaceEnabled()&&(this.clear(),X(D),this.close(),this.selection.focus())})),A.on("mousedown",this.bind(function(D){this.container.hasClass("select2-container-active")||this.opts.element.trigger(As.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),Z(D)})),C.on("mousedown",this.bind(function(){this.search.focus()})),A.on("focus",this.bind(function(D){Z(D)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(As.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(As.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(As.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(B){var A=this.selection.data("select2-data");A&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),B!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(A),choice:A}),this.triggerChange({removed:A})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()){this.updateSelection([]),this.close(),this.setPlaceholder()}else{var A=this;this.opts.initSelection.call(null,this.opts.element,function(B){B!==Aq&&null!==B&&(A.updateSelection(B),A.close(),A.setPlaceholder())})}},prepareOpts:function(){var A=this.parent.prepareOpts.apply(this,arguments),B=this;return"select"===A.element.get(0).tagName.toLowerCase()?A.initSelection=function(E,D){var C=E.find(":selected");D(B.optionToData(C))}:"data" in A&&(A.initSelection=A.initSelection||function(E,C){var D=E.val(),F=null;A.query({matcher:function(J,I,H){var G=An(D,A.id(H));return G&&(F=H),G},callback:As.isFunction(C)?function(){C(F)}:As.noop})}),A},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?Aq:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var A=this.getPlaceholder();if(""===this.opts.element.val()&&A!==Aq){if(this.select&&""!==this.select.find("option:first").text()){return}this.selection.find("span").html(this.opts.escapeMarkup(A)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(E,D,B){var C=0,F=this;if(this.findHighlightableChoices().each2(function(H,G){return An(F.id(G.data("select2-data")),F.opts.element.val())?(C=H,!1):Aq}),B!==!1&&this.highlight(C),D===!0&&this.showSearchInput===!1){var A=this.opts.minimumResultsForSearch;A>=0&&this.showSearch(P(E.results)>=A)}},showSearch:function(A){this.showSearchInput=A,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!A),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!A),As(this.dropdown,this.container).toggleClass("select2-with-searchbox",A)},onSelect:function(D,B){if(this.triggerSelect(D)){var C=this.opts.element.val(),A=this.data();this.opts.element.val(this.id(D)),this.updateSelection(D),this.opts.element.trigger({type:"select2-selected",val:this.id(D),choice:D}),this.close(),B&&B.noFocus||this.selection.focus(),An(C,this.id(D))||this.triggerChange({added:D,removed:A})}},updateSelection:function(C){var A,B=this.selection.find("span");this.selection.data("select2-data",C),B.empty(),A=this.opts.formatSelection(C,B),A!==Aq&&B.append(this.opts.escapeMarkup(A)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==Aq&&this.container.addClass("select2-allowclear")},val:function(){var D,C=!1,A=null,B=this,E=this.data();if(0===arguments.length){return this.opts.element.val()}if(D=arguments[0],arguments.length>1&&(C=arguments[1]),this.select){this.select.val(D).find(":selected").each2(function(G,F){return A=B.optionToData(F),!1}),this.updateSelection(A),this.setPlaceholder(),C&&this.triggerChange({added:A,removed:E})}else{if(this.opts.initSelection===Aq){throw Error("cannot call val() if initSelection() is not defined")}if(!D&&0!==D){return this.clear(C),Aq}this.opts.element.val(D),this.opts.initSelection(this.opts.element,function(F){B.opts.element.val(F?B.id(F):""),B.updateSelection(F),B.setPlaceholder(),C&&B.triggerChange({added:F,removed:E})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(C,B){var A;return 0===arguments.length?(A=this.selection.data("select2-data"),A==Aq&&(A=null),A):(C&&""!==C?(A=this.data(),this.opts.element.val(C?this.id(C):""),this.updateSelection(C),B&&this.triggerChange({added:C,removed:A})):this.clear(B),Aq)}}),At=N(Av,{createContainer:function(){var A=As(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return A},prepareOpts:function(){var A=this.parent.prepareOpts.apply(this,arguments),B=this;return"select"===A.element.get(0).tagName.toLowerCase()?A.initSelection=function(E,D){var C=[];E.find(":selected").each2(function(G,F){C.push(B.optionToData(F))}),D(C)}:"data" in A&&(A.initSelection=A.initSelection||function(E,C){var D=Ac(E.val(),A.separator),F=[];A.query({matcher:function(J,H,G){var I=As.grep(D,function(K){return An(K,A.id(G))}).length;return I&&F.push(G),I},callback:As.isFunction(C)?function(){for(var K=[],J=0;D.length>J;J++){for(var G=D[J],H=0;F.length>H;H++){var I=F[H];if(An(G,A.id(I))){K.push(I),F.splice(H,1);break}}}C(K)}:As.noop})}),A},selectChoice:function(B){var A=this.container.find(".select2-search-choice-focus");A.length&&B&&B[0]==A[0]||(A.length&&this.opts.element.trigger("choice-deselected",A),A.removeClass("select2-search-choice-focus"),B&&B.length&&(this.close(),B.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",B)))},initContainer:function(){var B,A=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=B=this.container.find(A);var C=this;this.selection.on("mousedown",".select2-search-choice",function(){C.search[0].focus(),C.selectChoice(As(this))}),this.search.attr("id","s2id_autogen"+Au()),As("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(H){if(this.isInterfaceEnabled()){++this.keydowns;var E=B.find(".select2-search-choice-focus"),I=E.prev(".select2-search-choice:not(.select2-locked)"),D=E.next(".select2-search-choice:not(.select2-locked)"),F=Y(this.search);if(E.length&&(H.which==Ar.LEFT||H.which==Ar.RIGHT||H.which==Ar.BACKSPACE||H.which==Ar.DELETE||H.which==Ar.ENTER)){var G=E;return H.which==Ar.LEFT&&I.length?G=I:H.which==Ar.RIGHT?G=D.length?D:null:H.which===Ar.BACKSPACE?(this.unselect(E.first()),this.search.width(10),G=I.length?I:D):H.which==Ar.DELETE?(this.unselect(E.first()),this.search.width(10),G=D.length?D:null):H.which==Ar.ENTER&&(G=null),this.selectChoice(G),Z(H),G&&G.length||this.open(),Aq}if((H.which===Ar.BACKSPACE&&1==this.keydowns||H.which==Ar.LEFT)&&0==F.offset&&!F.length){return this.selectChoice(B.find(".select2-search-choice:not(.select2-locked)").last()),Z(H),Aq}if(this.selectChoice(null),this.opened()){switch(H.which){case Ar.UP:case Ar.DOWN:return this.moveHighlight(H.which===Ar.UP?-1:1),Z(H),Aq;case Ar.ENTER:return this.selectHighlighted(),Z(H),Aq;case Ar.TAB:return this.selectHighlighted({noFocus:!0}),Aq;case Ar.ESC:return this.cancel(H),Z(H),Aq}}if(H.which!==Ar.TAB&&!Ar.isControl(H)&&!Ar.isFunctionKey(H)&&H.which!==Ar.BACKSPACE&&H.which!==Ar.ESC){if(H.which===Ar.ENTER){if(this.opts.openOnEnter===!1){return}if(H.altKey||H.ctrlKey||H.shiftKey||H.metaKey){return}}this.open(),(H.which===Ar.PAGE_UP||H.which===Ar.PAGE_DOWN)&&Z(H),H.which===Ar.ENTER&&Z(H)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(D){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),D.stopImmediatePropagation(),this.opts.element.trigger(As.Event("select2-blur"))})),this.container.on("mousedown",A,this.bind(function(D){this.isInterfaceEnabled()&&(As(D.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(As.Event("select2-focus")),this.open(),this.focusSearch(),D.preventDefault()))})),this.container.on("focus",A,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(As.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var A=this;this.opts.initSelection.call(null,this.opts.element,function(B){B!==Aq&&null!==B&&(A.updateSelection(B),A.close(),A.clearSearch())})}},clearSearch:function(){var B=this.getPlaceholder(),A=this.getMaxSearchWidth();B!==Aq&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(B).addClass("select2-default"),this.search.width(A>0?A:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(As.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(C){var D=[],A=[],B=this;As(C).each(function(){0>Ap(B.id(this),D)&&(D.push(B.id(this)),A.push(this))}),C=A,this.selection.find(".select2-search-choice").remove(),As(C).each(function(){B.addSelectedChoice(this)}),B.postprocessResults()},tokenize:function(){var A=this.search.val();A=this.opts.tokenizer(A,this.data(),this.bind(this.onSelect),this.opts),null!=A&&A!=Aq&&(this.search.val(A),A.length>0&&this.open())},onSelect:function(B,A){this.triggerSelect(B)&&(this.addSelectedChoice(B),this.opts.element.trigger({type:"selected",val:this.id(B),choice:B}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:B}),A&&A.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(E){var B,H=!E.locked,A=As("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),F=As("<li class='select2-search-choice select2-locked'><div></div></li>"),G=H?A:F,C=this.id(E),D=this.getVal();B=this.opts.formatSelection(E,G.find("div")),B!=Aq&&G.find("div").replaceWith("<div title='"+this.opts.escapeMarkup(B)+"'>"+this.opts.escapeMarkup(B)+"</div>"),H&&G.find(".select2-search-choice-close").on("mousedown",Z).on("click dblclick",this.bind(function(I){this.isInterfaceEnabled()&&(As(I.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(As(I.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),Z(I))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),G.data("select2-data",E),G.insertBefore(this.searchContainer),D.push(C),this.setVal(D)},unselect:function(D){var C,A,B=this.getVal();if(D=D.closest(".select2-search-choice"),0===D.length){throw"Invalid argument: "+D+". Must be .select2-search-choice"}C=D.data("select2-data"),C&&(A=Ap(this.id(C),B),A>=0&&(B.splice(A,1),this.setVal(B),this.select&&this.postprocessResults()),D.remove(),this.opts.element.trigger({type:"removed",val:this.id(C),choice:C}),this.triggerChange({removed:C}))},postprocessResults:function(F,D,E){var B=this.getVal(),C=this.results.find(".select2-result"),G=this.results.find(".select2-result-with-children"),A=this;C.each2(function(J,H){var I=A.id(H.data("select2-data"));Ap(I,B)>=0&&(H.addClass("select2-selected"),H.find(".select2-result-selectable").addClass("select2-selected"))}),G.each2(function(I,H){H.is(".select2-result-selectable")||0!==H.find(".select2-result-selectable:not(.select2-selected)").length||H.addClass("select2-selected")}),-1==this.highlight()&&E!==!1&&A.highlight(0),!this.opts.createSearchChoice&&!C.filter(".select2-result:not(.select2-selected)").length>0&&this.results.append("<li class='select2-no-results'>"+A.opts.formatNoMatches(A.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-Ad(this.search)},resizeSearch:function(){var E,C,D,A,B,F=Ad(this.search);E=S(this.search)+10,C=this.search.offset().left,D=this.selection.width(),A=this.selection.offset().left,B=D-(C-A)-F,E>B&&(B=D-F),40>B&&(B=D-F),0>=B&&(B=E),this.search.width(B)},getVal:function(){var A;return this.select?(A=this.select.val(),null===A?[]:A):(A=this.opts.element.val(),Ac(A,this.opts.separator))},setVal:function(A){var B;this.select?this.select.val(A):(B=[],As(A).each(function(){0>Ap(this,B)&&B.push(this)}),this.opts.element.val(0===B.length?"":B.join(this.opts.separator)))},buildChangeDetails:function(D,B){for(var B=B.slice(0),D=D.slice(0),C=0;B.length>C;C++){for(var A=0;D.length>A;A++){An(this.opts.id(B[C]),this.opts.id(D[A]))&&(B.splice(C,1),C--,D.splice(A,1),A--)}}return{added:B,removed:D}},val:function(C,A){var B,D=this;if(0===arguments.length){return this.getVal()}if(B=this.data(),B.length||(B=[]),!C&&0!==C){return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),A&&this.triggerChange({added:this.data(),removed:B}),Aq}if(this.setVal(C),this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection)),A&&this.triggerChange(this.buildChangeDetails(B,this.data()))}else{if(this.opts.initSelection===Aq){throw Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(E){var F=As(E).map(D.id);D.setVal(F),D.updateSelection(E),D.clearSearch(),A&&D.triggerChange(this.buildChangeDetails(B,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select){throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var A=[],B=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){A.push(B.opts.id(As(this).data("select2-data")))}),this.setVal(A),this.triggerChange()},data:function(D,B){var E,A,C=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return As(this).data("select2-data")}).get():(A=this.data(),D||(D=[]),E=As.map(D,function(F){return C.opts.id(F)}),this.setVal(E),this.updateSelection(D),this.clearSearch(),B&&this.triggerChange(this.buildChangeDetails(A,this.data())),Aq)}}),As.fn.select2=function(){var B,A,C,D,E=Array.prototype.slice.call(arguments,0),F=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","readonly","positionDropdown","data"],G=["val","opened","isFocused","container","data"];return this.each(function(){if(0===E.length||"object"==typeof E[0]){B=0===E.length?{}:As.extend({},E[0]),B.element=As(this),"select"===B.element.get(0).tagName.toLowerCase()?D=B.element.prop("multiple"):(D=B.multiple||!1,"tags" in B&&(B.multiple=D=!0)),A=D?new At:new L,A.init(B)}else{if("string"!=typeof E[0]){throw"Invalid arguments to select2 plugin: "+E}if(0>Ap(E[0],F)){throw"Unknown method: "+E[0]}if(C=Aq,A=As(this).data("select2"),A===Aq){return}if(C="container"===E[0]?A.container:A[E[0]].apply(A,E.slice(1)),Ap(E[0],G)>=0){return !1}}}),C===Aq?this:C},As.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(E,C,D,A){var B=[];return R(E.text,D.term,B,A),B.join("")},formatSelection:function(A){return A?A.text:Aq},sortResults:function(A){return A},formatResultCssClass:function(){return Aq},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(C,A){var B=A-C.length;return"Please enter "+B+" more character"+(1==B?"":"s")},formatInputTooLong:function(C,A){var B=C.length-A;return"Please delete "+B+" character"+(1==B?"":"s")},formatSelectionTooBig:function(A){return"You can only select "+A+" item"+(1==A?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(A){return A.id},matcher:function(B,A){return(""+A).toUpperCase().indexOf((""+B).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:M,escapeMarkup:function(B){var A={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return(B+"").replace(/[&<>"'\/\\]/g,function(C){return A[C]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(A){return A},adaptDropdownCssClass:function(){return null}},As.fn.select2.ajaxDefaults={transport:As.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:V,local:W,tags:T},util:{debounce:Ag,markMatch:R},"class":{"abstract":Av,single:L,multi:At}}}}(jQuery);