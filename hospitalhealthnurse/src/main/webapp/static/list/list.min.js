(function(E,C){var D=E.document,A;var B=function(Q,F,R){var S=this,L,J,K,O,P,M,N={updated:[]};this.listContainer=typeof Q=="string"?D.getElementById(Q):Q;if(!this.listContainer){return}this.items=[];this.visibleItems=[];this.matchingItems=[];this.searched=false;this.filtered=false;this.list=null;this.templateEngines={};this.page=F.page||200;this.i=F.i||1;J={start:function(U,T){T.plugins=T.plugins||{};this.classes(T);L=new P(S,T);this.callbacks(T);this.items.start(U,T);S.update();this.plugins(T.plugins)},classes:function(T){T.listClass=T.listClass||"list";T.searchClass=T.searchClass||"search";T.sortClass=T.sortClass||"sort"},callbacks:function(T){S.list=A.getByClass(T.listClass,S.listContainer,true);A.addEvent(A.getByClass(T.searchClass,S.listContainer),"keyup",S.search);M=A.getByClass(T.sortClass,S.listContainer);A.addEvent(M,"click",S.sort)},items:{start:function(W,V){if(V.valueNames){var T=this.get(),U=V.valueNames;if(V.indexAsync){this.indexAsync(T,U)}else{this.index(T,U)}}if(W!==C){S.add(W)}},get:function(){var W=S.list.childNodes,V=[];for(var T=0,U=W.length;T<U;T++){if(W[T].data===C){V.push(W[T])}}return V},index:function(W,U){for(var V=0,T=W.length;V<T;V++){S.items.push(new O(U,W[V]))}},indexAsync:function(V,T){var U=V.splice(0,100);this.index(U,T);if(V.length>0){setTimeout(function(){J.items.indexAsync(V,T)},10)}else{S.update()}}},plugins:function(W){var U={templater:L,init:J,initialItems:K,Item:O,Templater:P,sortButtons:M,events:N,reset:I};for(var V=0;V<W.length;V++){W[V][1]=W[V][1]||{};var T=W[V][1].name||W[V][0];S[T]=S.plugins[W[V][0]].call(S,U,W[V][1])}}};this.add=function(Y,X){if(X){G(Y,X)}var U=[],V=false;if(Y[0]===C){Y=[Y]}for(var Z=0,T=Y.length;Z<T;Z++){var W=null;if(Y[Z] instanceof O){W=Y[Z];W.reload()}else{V=S.items.length>S.page?true:false;W=new O(Y[Z],C,V)}S.items.push(W);U.push(W)}S.update();return U};var G=function(W,U,V){var T=W.splice(0,100);V=V||[];V=V.concat(S.add(T));if(W.length>0){setTimeout(function(){G(W,U,V)},10)}else{S.update();U(V)}};this.show=function(U,T){this.i=U;this.page=T;S.update()};this.remove=function(X,V,W){var T=0;for(var U=0,Y=S.items.length;U<Y;U++){if(S.items[U].values()[X]==V){L.remove(S.items[U],W);S.items.splice(U,1);Y--;T++}}S.update();return T};this.get=function(X,V){var W=[];for(var T=0,U=S.items.length;T<U;T++){var Y=S.items[T];if(Y.values()[X]==V){W.push(Y)}}if(W.length==0){return null}else{if(W.length==1){return W[0]}else{return W}}};this.sort=function(g,d){var T=S.items.length,h=null,X=g.target||g.srcElement,V="",W=false,Z="asc",b="desc",d=d||{};if(X===C){h=g;W=d.asc||false}else{h=A.getAttribute(X,"data-sort");W=A.hasClass(X,Z)?false:true}for(var Y=0,U=M.length;Y<U;Y++){A.removeClass(M[Y],Z);A.removeClass(M[Y],b)}if(W){if(X!==C){A.addClass(X,Z)}W=true}else{if(X!==C){A.addClass(X,b)}W=false}if(d.sortFunction){d.sortFunction=d.sortFunction}else{d.sortFunction=function(e,c){return A.sorter.alphanum(e.values()[h].toLowerCase(),c.values()[h].toLowerCase(),W)}}S.items.sort(d.sortFunction);S.update()};this.search=function(i,g){S.i=1;var q=[],T,p,W,U,V,g=g===C?S.items[0].values():g,i=i===C?"":i,Z=i.target||i.srcElement;i=Z===C?(""+i).toLowerCase():""+Z.value.toLowerCase();V=S.items;i=i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");L.clear();if(i===""){I.search();S.searched=false;S.update()}else{S.searched=true;for(var b=0,X=V.length;b<X;b++){T=false;p=V[b];U=p.values();for(var Y in g){if(U.hasOwnProperty(Y)&&g[Y]!==null){W=U[Y]!=null?U[Y].toString().toLowerCase():"";if(i!==""&&W.search(i)>-1){T=true}}}if(T){p.found=true;q.push(p)}else{p.found=false}}S.update()}return S.visibleItems};this.filter=function(W){S.i=1;I.filter();if(W===C){S.filtered=false}else{S.filtered=true;var V=S.items;for(var T=0,U=V.length;T<U;T++){var X=V[T];if(W(X)){X.filtered=true}else{X.filtered=false}}}S.update();return S.visibleItems};this.size=function(){return S.items.length};this.clear=function(){L.clear();S.items=[]};this.on=function(U,T){N[U].push(T)};var H=function(U){var T=N[U].length;while(T--){N[U][T]()}};var I={filter:function(){var U=S.items,T=U.length;while(T--){U[T].filtered=false}},search:function(){var U=S.items,T=U.length;while(T--){U[T].found=false}}};this.update=function(){var V=S.items,T=V.length;S.visibleItems=[];S.matchingItems=[];L.clear();for(var U=0;U<T;U++){if(V[U].matching()&&S.matchingItems.length+1>=S.i&&S.visibleItems.length<S.page){V[U].show();S.visibleItems.push(V[U]);S.matchingItems.push(V[U])}else{if(V[U].matching()){S.matchingItems.push(V[U]);V[U].hide()}else{V[U].hide()}}}H("updated")};O=function(X,W,U){var V=this,Y={};this.found=false;this.filtered=false;var T=function(e,b,Z){if(b===C){if(Z){V.values(e,Z)}else{V.values(e)}}else{V.elm=b;var g=L.get(V,e);V.values(g)}};this.values=function(e,b){if(e!==C){for(var Z in e){Y[Z]=e[Z]}if(b!==true){L.set(V,V.values())}}else{return Y}};this.show=function(){L.show(V)};this.hide=function(){L.hide(V)};this.matching=function(){return S.filtered&&S.searched&&V.found&&V.filtered||S.filtered&&!S.searched&&V.filtered||!S.filtered&&S.searched&&V.found||!S.filtered&&!S.searched};this.visible=function(){return V.elm.parentNode?true:false};T(X,W,U)};P=function(U,T){if(T.engine===C){T.engine="standard"}else{T.engine=T.engine.toLowerCase()}return new S.constructor.prototype.templateEngines[T.engine](U,T)};J.start(R,F)};B.prototype.templateEngines={};B.prototype.plugins={};B.prototype.templateEngines.standard=function(K,H){function L(Q){if(Q===C){var N=G.childNodes,M=[];for(var O=0,P=N.length;O<P;O++){if(N[O].data===C){return N[O]}}return null}else{if(Q.indexOf("<")!==-1){var R=D.createElement("div");R.innerHTML=Q;return R.firstChild}else{return D.getElementById(H.item)}}}var G=A.getByClass(H.listClass,K.listContainer,true),F=L(H.item),I=this;var J={created:function(M){if(M.elm===C){I.create(M)}}};this.get=function(Q,O){J.created(Q);var P={};for(var N=0,R=O.length;N<R;N++){var M=A.getByClass(O[N],Q.elm,true);P[O[N]]=M?M.innerHTML:""}return P};this.set=function(P,N){J.created(P);for(var O in N){if(N.hasOwnProperty(O)){var M=A.getByClass(O,P.elm,true);if(M){M.innerHTML=N[O]}}}};this.create=function(N){if(N.elm!==C){return}var M=F.cloneNode(true);M.id="";N.elm=M;I.set(N,N.values())};this.remove=function(M){G.removeChild(M.elm)};this.show=function(M){J.created(M);G.appendChild(M.elm)};this.hide=function(M){if(M.elm!==C&&M.elm.parentNode===G){G.removeChild(M.elm)}};this.clear=function(){if(G.hasChildNodes()){while(G.childNodes.length>=1){G.removeChild(G.firstChild)}}}};A={getByClass:function(){if(D.getElementsByClassName){return function(H,F,G){if(G){return F.getElementsByClassName(H)[0]}else{return F.getElementsByClassName(H)}}}else{return function(L,K,O){var F=[],M="*";if(K==null){K=D}var N=K.getElementsByTagName(M);var I=N.length;var J=new RegExp("(^|\\s)"+L+"(\\s|$)");for(var G=0,H=0;G<I;G++){if(J.test(N[G].className)){if(O){return N[G]}else{F[H]=N[G];H++}}}return F}}}(),addEvent:function(G,F){if(F.addEventListener){return function(K,J,L){if(K&&!(K instanceof Array)&&!K.length&&!A.isNodeList(K)&&K.length!==0||K===G){K.addEventListener(J,L,false)}else{if(K&&K[0]!==C){var H=K.length;for(var I=0;I<H;I++){A.addEvent(K[I],J,L)}}}}}else{if(F.attachEvent){return function(K,J,L){if(K&&!(K instanceof Array)&&!K.length&&!A.isNodeList(K)&&K.length!==0||K===G){K.attachEvent("on"+J,function(){return L.call(K,G.event)})}else{if(K&&K[0]!==C){var H=K.length;for(var I=0;I<H;I++){A.addEvent(K[I],J,L)}}}}}}}(this,D),getAttribute:function(J,I){var G=J.getAttribute&&J.getAttribute(I)||null;if(!G){var H=J.attributes;var K=H.length;for(var F=0;F<K;F++){if(I[F]!==C){if(I[F].nodeName===I){G=I[F].nodeValue}}}}return G},isNodeList:function(G){var F=Object.prototype.toString.call(G);if(typeof G==="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(F)&&(G.length==0||typeof G[0]==="object"&&G[0].nodeType>0)){return true}return false},hasClass:function(H,F){var G=this.getAttribute(H,"class")||this.getAttribute(H,"className")||"";return G.search(F)>-1},addClass:function(H,F){if(!this.hasClass(H,F)){var G=this.getAttribute(H,"class")||this.getAttribute(H,"className")||"";G=G+" "+F+" ";G=G.replace(/\s{2,}/g," ");H.setAttribute("class",G)}},removeClass:function(H,F){if(this.hasClass(H,F)){var G=this.getAttribute(H,"class")||this.getAttribute(H,"className")||"";G=G.replace(F,"");H.setAttribute("class",G)}},sorter:{alphanum:function(J,I,M){if(J===C||J===null){J=""}if(I===C||I===null){I=""}J=J.toString().replace(/&(lt|gt);/g,function(O,N){return N=="lt"?"<":">"});J=J.replace(/<\/?[^>]+(>|$)/g,"");I=I.toString().replace(/&(lt|gt);/g,function(O,N){return N=="lt"?"<":">"});I=I.replace(/<\/?[^>]+(>|$)/g,"");var F=this.chunkify(J);var K=this.chunkify(I);for(var L=0;F[L]&&K[L];L++){if(F[L]!==K[L]){var G=Number(F[L]),H=Number(K[L]);if(M){if(G==F[L]&&H==K[L]){return G-H}else{return F[L]>K[L]?1:-1}}else{if(G==F[L]&&H==K[L]){return H-G}else{return F[L]>K[L]?-1:1}}}}return F.length-K.length},chunkify:function(J){var H=[],I=0,M=-1,F=0,K,L;while(K=(L=J.charAt(I++)).charCodeAt(0)){var G=K==45||K==46||K>=48&&K<=57;if(G!==F){H[++M]="";F=G}H[M]+=L}return H}}};E.List=B;E.ListJsHelpers=A})(window);