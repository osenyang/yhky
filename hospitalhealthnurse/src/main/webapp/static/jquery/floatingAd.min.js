(function(F,H,E,B){var A="floatingAd";var G={step:1,delay:50,isLinkClosed:false,onClose:function(I){}};var C={linkUrl:"#","z-index":"100","closed-icon":"",imgHeight:"",imgWidth:"",title:"",img:"#",linkWindow:"_blank",headFilter:0.2};function D(J,I){this.element=J;this.options=F.extend({},G,I,{width:F(H).width(),height:F(H).height(),xPos:this.getRandomNum(0,F(H).width()-F(J).innerWidth()),yPos:this.getRandomNum(0,300),yOn:this.getRandomNum(0,1),xOn:this.getRandomNum(0,1),yPath:this.getRandomNum(0,1),xPath:this.getRandomNum(0,1),hOffset:F(J).innerHeight(),wOffset:F(J).innerWidth(),fn:function(){},interval:0});this._defaults=G;this._name=A;this.init()}D.prototype={init:function(){var L=F(this.element);var J=this.options;var M=this;var I=0;var K=0;L.css({left:J.xPos+M.scrollX(),top:J.yPos+M.scrollY()});J.fn=function(){J.width=F(H).width();J.height=F(H).height();if(I==M.scrollX()&&K==M.scrollY()){L.css({left:J.xPos+M.scrollX(),top:J.yPos+M.scrollY()});if(J.yOn){J.yPos=J.yPos+J.step}else{J.yPos=J.yPos-J.step}if(J.yPos<=0){J.yOn=1;J.yPos=0}if(J.yPos>=(J.height-J.hOffset)){J.yOn=0;J.yPos=(J.height-J.hOffset)}if(J.xOn){J.xPos=J.xPos+J.step}else{J.xPos=J.xPos-J.step}if(J.xPos<=0){J.xOn=1;J.xPos=0}if(J.xPos>=(J.width-J.wOffset)){J.xOn=0;J.xPos=(J.width-J.wOffset)}}K=F(H).scrollTop();I=F(H).scrollLeft()};this.run(L,J)},run:function(I,J){this.start(I,J);this.adEvent(I,J)},start:function(I,J){I.find("div.close").hide();J.interval=H.setInterval(J.fn,J.delay);H.setTimeout(function(){I.show()},J.delay)},getRandomNum:function(I,L){var J=L-I;var K=Math.random();return(I+Math.round(K*J))},getPath:function(I){return I?0:1},clear:function(I,J){I.find("div.close").show();H.clearInterval(J.interval)},close:function(J,K,I){J.unbind("hover");J.hide();if(I){K.onClose.call(J)}},adEvent:function(K,J){var L={elem:this,fn_close:function(){this.elem.close(K,J,true)},fn_clear:function(){if(this.elem.options.isLinkClosed){this.elem.close(K,J,false)}}};K.find("div.button").bind("click",jQuery.proxy(L,"fn_close"));K.find("a").bind("click",jQuery.proxy(L,"fn_clear"));var I={elem:this,over:function(){this.elem.clear(K,J)},out:function(){this.elem.start(K,J)}};K.hover(jQuery.proxy(I,"over"),jQuery.proxy(I,"out"))},scrollX:function(){var I=E.documentElement;return self.pageXOffset||(I&&I.scrollLeft)||E.body.scrollLeft},scrollY:function(){var I=E.documentElement;return self.pageYOffset||(I&&I.scrollTop)||E.body.scrollTop}};F.fn.floatingAd=function(I){return this.children("div").each(function(J,K){if(!F.data(this,"plugin_"+A)){F.data(this,"plugin_"+A,new D(this,I))}})};F.floatingAd=function(K){if(K){if(K.ad){var O=F("#"+A);if(O.length<=0){O=F("<div>",{id:A,"class":A}).appendTo("body")}for(var L in K.ad){var I=K.ad[L];I=F.extend({},C,I);var J=F("<div>",{"class":"ad"});J.css("z-index",I["z-index"]);var N=F("<div>",{"class":"close",style:(I.imgWidth?"width:"+I.imgWidth+"px;":"")});F("<div>",{"class":"opacity",style:"opacity: "+I.headFilter+";filter: alpha(opacity = "+I.headFilter*100+");"}).appendTo(N);F("<div>",{"class":"text"}).append(F("<div>",{"class":"title",text:I.title})).append(F("<div>",{"class":"button",style:I["closed-icon"]?'background:url("'+I["closed-icon"]+'") no-repeat;':""})).appendTo(N);N.appendTo(J);var M=F("<div>");F("<a>",{href:I.linkUrl,target:I.linkWindow,title:I.title}).append(F("<img>",{src:I.img,style:(I.imgHeight?"height:"+I.imgHeight+"px;":"")+(I.imgWidth?"width:"+I.imgWidth+"px;":"")})).appendTo(M);M.appendTo(J);J.appendTo(O)}delete K.ad;F("#"+A).floatingAd(K)}}else{F.error("漂浮广告错误!")}}})(jQuery,window,document);