(function(G,F,E,A){var H="floatingAd";var C={step:1,delay:50,isLinkClosed:false,onClose:function(I){}};var D={linkUrl:"#","z-index":"100","closed-icon":"",imgHeight:"",imgWidth:"",title:"",img:"#",linkWindow:"_blank",headFilter:0.2};function B(J,I){this.element=J;this.options=G.extend({},C,I,{width:G(F).width(),height:G(F).height(),xPos:this.getRandomNum(0,G(F).width()-G(J).innerWidth()),yPos:this.getRandomNum(0,300),yOn:this.getRandomNum(0,1),xOn:this.getRandomNum(0,1),yPath:this.getRandomNum(0,1),xPath:this.getRandomNum(0,1),hOffset:G(J).innerHeight(),wOffset:G(J).innerWidth(),fn:function(){},interval:0});this._defaults=C;this._name=H;this.init()}B.prototype={init:function(){var K=G(this.element);var M=this.options;var J=this;var L=0;var I=0;K.css({"left":M.xPos+J.scrollX(),"top":M.yPos+J.scrollY()});M.fn=function(){M.width=G(F).width();M.height=G(F).height();if(L==J.scrollX()&&I==J.scrollY()){K.css({"left":M.xPos+J.scrollX(),"top":M.yPos+J.scrollY()});if(M.yOn){M.yPos=M.yPos+M.step}else{M.yPos=M.yPos-M.step}if(M.yPos<=0){M.yOn=1;M.yPos=0}if(M.yPos>=(M.height-M.hOffset)){M.yOn=0;M.yPos=(M.height-M.hOffset)}if(M.xOn){M.xPos=M.xPos+M.step}else{M.xPos=M.xPos-M.step}if(M.xPos<=0){M.xOn=1;M.xPos=0}if(M.xPos>=(M.width-M.wOffset)){M.xOn=0;M.xPos=(M.width-M.wOffset)}}I=G(F).scrollTop();L=G(F).scrollLeft()};this.run(K,M)},run:function(I,J){this.start(I,J);this.adEvent(I,J)},start:function(I,J){I.find("div.close").hide();J.interval=F.setInterval(J.fn,J.delay);F.setTimeout(function(){I.show()},J.delay)},getRandomNum:function(L,K){var I=K-L;var J=Math.random();return(L+Math.round(J*I))},getPath:function(I){return I?0:1},clear:function(I,J){I.find("div.close").show();F.clearInterval(J.interval)},close:function(J,K,I){J.unbind("hover");J.hide();if(I){K.onClose.call(J)}},adEvent:function(J,L){var I={elem:this,fn_close:function(){this.elem.close(J,L,true)},fn_clear:function(){if(this.elem.options.isLinkClosed){this.elem.close(J,L,false)}}};J.find("div.button").bind("click",jQuery.proxy(I,"fn_close"));J.find("a").bind("click",jQuery.proxy(I,"fn_clear"));var K={elem:this,over:function(){this.elem.clear(J,L)},out:function(){this.elem.start(J,L)}};J.hover(jQuery.proxy(K,"over"),jQuery.proxy(K,"out"))},scrollX:function(){var I=E.documentElement;return self.pageXOffset||(I&&I.scrollLeft)||E.body.scrollLeft},scrollY:function(){var I=E.documentElement;return self.pageYOffset||(I&&I.scrollTop)||E.body.scrollTop}};G.fn.floatingAd=function(I){return this.children("div").each(function(J,K){if(!G.data(this,"plugin_"+H)){G.data(this,"plugin_"+H,new B(this,I))}})};G.floatingAd=function(K){if(K){if(K.ad){var J=G("#"+H);if(J.length<=0){J=G("<div>",{"id":H,"class":H}).appendTo("body")}for(var I in K.ad){var M=K.ad[I];M=G.extend({},D,M);var O=G("<div>",{"class":"ad"});O.css("z-index",M["z-index"]);var L=G("<div>",{"class":"close","style":(M.imgWidth?"width:"+M.imgWidth+"px;":"")});G("<div>",{"class":"opacity","style":"opacity: "+M.headFilter+";filter: alpha(opacity = "+M.headFilter*100+");"}).appendTo(L);G("<div>",{"class":"text"}).append(G("<div>",{"class":"title","text":M.title})).append(G("<div>",{"class":"button","style":M["closed-icon"]?'background:url("'+M["closed-icon"]+'") no-repeat;':""})).appendTo(L);L.appendTo(O);var N=G("<div>");G("<a>",{href:M.linkUrl,target:M.linkWindow,title:M.title}).append(G("<img>",{"src":M.img,"style":(M.imgHeight?"height:"+M.imgHeight+"px;":"")+(M.imgWidth?"width:"+M.imgWidth+"px;":"")})).appendTo(N);N.appendTo(O);O.appendTo(J)}delete K.ad;G("#"+H).floatingAd(K)}}else{G.error("漂浮广告错误!")}}})(jQuery,window,document);