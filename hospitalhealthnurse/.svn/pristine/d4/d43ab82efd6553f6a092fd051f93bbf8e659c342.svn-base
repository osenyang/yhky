/* X-editable - v1.4.4 
* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
* http://github.com/vitalets/x-editable
* Copyright (c) 2013 Vitaliy Potapov; Licensed MIT */
(function(B){var A=function(D,C){this.options=B.extend({},B.fn.editableform.defaults,C);this.$div=B(D);if(!this.options.scope){this.options.scope=this}};A.prototype={constructor:A,initInput:function(){this.input=this.options.input;this.value=this.input.str2value(this.options.value)},initTemplate:function(){this.$form=B(B.fn.editableform.template)},initButtons:function(){var C=this.$form.find(".editable-buttons");C.append(B.fn.editableform.buttons);if(this.options.showbuttons==="bottom"){C.addClass("editable-buttons-bottom")}},render:function(){this.$loading=B(B.fn.editableform.loading);this.$div.empty().append(this.$loading);this.initTemplate();if(this.options.showbuttons){this.initButtons()}else{this.$form.find(".editable-buttons").remove()}this.showLoading();this.$div.triggerHandler("rendering");this.initInput();this.input.prerender();this.$form.find("div.editable-input").append(this.input.$tpl);this.$div.append(this.$form);B.when(this.input.render()).then(B.proxy(function(){if(!this.options.showbuttons){this.input.autosubmit()}this.$form.find(".editable-cancel").click(B.proxy(this.cancel,this));if(this.input.error){this.error(this.input.error);this.$form.find(".editable-submit").attr("disabled",true);this.input.$input.attr("disabled",true);this.$form.submit(function(C){C.preventDefault()})}else{this.error(false);this.input.$input.removeAttr("disabled");this.$form.find(".editable-submit").removeAttr("disabled");this.input.value2input(this.value);this.$form.submit(B.proxy(this.submit,this))}this.$div.triggerHandler("rendered");this.showForm();if(this.input.postrender){this.input.postrender()}},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var D,C;if(this.$form){D=this.$form.outerWidth();C=this.$form.outerHeight();if(D){this.$loading.width(D)}if(C){this.$loading.height(C)}this.$form.hide()}else{D=this.$loading.parent().width();if(D){this.$loading.width(D)}}this.$loading.show()},showForm:function(C){this.$loading.hide();this.$form.show();if(C!==false){this.input.activate()}this.$div.triggerHandler("show")},error:function(G){var E=this.$form.find(".control-group"),D=this.$form.find(".editable-error-block"),F;if(G===false){E.removeClass(B.fn.editableform.errorGroupClass);D.removeClass(B.fn.editableform.errorBlockClass).empty().hide()}else{if(G){F=G.split("\n");for(var C=0;C<F.length;C++){F[C]=B("<div>").text(F[C]).html()}G=F.join("<br>")}E.addClass(B.fn.editableform.errorGroupClass);D.addClass(B.fn.editableform.errorBlockClass).html(G).show()}},submit:function(C){C.stopPropagation();C.preventDefault();var D,E=this.input.input2value();if(D=this.validate(E)){this.error(D);this.showForm();return}if(!this.options.savenochange&&this.input.value2str(E)==this.input.value2str(this.value)){this.$div.triggerHandler("nochange");return}B.when(this.save(E)).done(B.proxy(function(G){var F=typeof this.options.success==="function"?this.options.success.call(this.options.scope,G,E):null;if(F===false){this.error(false);this.showForm(false);return}if(typeof F==="string"){this.error(F);this.showForm();return}if(F&&typeof F==="object"&&F.hasOwnProperty("newValue")){E=F.newValue}this.error(false);this.value=E;this.$div.triggerHandler("save",{newValue:E,response:G})},this)).fail(B.proxy(function(F){var G;if(typeof this.options.error==="function"){G=this.options.error.call(this.options.scope,F,E)}else{G=typeof F==="string"?F:F.responseText||F.statusText||"Unknown error!"}this.error(G);this.showForm()},this))},save:function(G){var D=this.input.value2submit(G);this.options.pk=B.fn.editableutils.tryParseJson(this.options.pk,true);var C=(typeof this.options.pk==="function")?this.options.pk.call(this.options.scope):this.options.pk,E=!!(typeof this.options.url==="function"||(this.options.url&&((this.options.send==="always")||(this.options.send==="auto"&&C!==null&&C!==undefined)))),F;if(E){this.showLoading();F={name:this.options.name||"",value:D,pk:C};if(typeof this.options.params==="function"){F=this.options.params.call(this.options.scope,F)}else{this.options.params=B.fn.editableutils.tryParseJson(this.options.params,true);B.extend(F,this.options.params)}if(typeof this.options.url==="function"){return this.options.url.call(this.options.scope,F)}else{return B.ajax(B.extend({url:this.options.url,data:F,type:"POST"},this.options.ajaxOptions))}}},validate:function(C){if(C===undefined){C=this.value}if(typeof this.options.validate==="function"){return this.options.validate.call(this.options.scope,C)}},option:function(C,D){if(C in this.options){this.options[C]=D}if(C==="value"){this.setValue(D)}},setValue:function(C,D){if(D){this.value=this.input.str2value(C)}else{this.value=C}if(this.$form&&this.$form.is(":visible")){this.input.value2input(this.value)}}};B.fn.editableform=function(C){var D=arguments;return this.each(function(){var E=B(this),G=E.data("editableform"),F=typeof C==="object"&&C;if(!G){E.data("editableform",(G=new A(this,F)))}if(typeof C==="string"){G[C].apply(G,Array.prototype.slice.call(D,1))}})};B.fn.editableform.Constructor=A;B.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:true,scope:null,savenochange:false};B.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>';B.fn.editableform.loading='<div class="editableform-loading"></div>';B.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>';B.fn.editableform.errorGroupClass=null;B.fn.editableform.errorBlockClass="editable-error"}(window.jQuery));(function(A){A.fn.editableutils={inherit:function(C,D){var B=function(){};B.prototype=D.prototype;C.prototype=new B();C.prototype.constructor=C;C.superclass=D.prototype},setCursorPosition:function(C,B){if(C.setSelectionRange){C.setSelectionRange(B,B)}else{if(C.createTextRange){var D=C.createTextRange();D.collapse(true);D.moveEnd("character",B);D.moveStart("character",B);D.select()}}},tryParseJson:function(B,D){if(typeof B==="string"&&B.length&&B.match(/^[\{\[].*[\}\]]$/)){if(D){try{B=(new Function("return "+B))()}catch(C){}finally{return B}}else{B=(new Function("return "+B))()}}return B},sliceObj:function(C,F,G){var B,H,E={};if(!A.isArray(F)||!F.length){return E}for(var D=0;D<F.length;D++){B=F[D];if(C.hasOwnProperty(B)){E[B]=C[B]}if(G===true){continue}H=B.toLowerCase();if(C.hasOwnProperty(H)){E[B]=C[H]}}return E},getConfigData:function(B){var C={};A.each(B.data(),function(E,D){if(typeof D!=="object"||(D&&typeof D==="object"&&(D.constructor===Object||D.constructor===Array))){C[E]=D}});return C},objectKeys:function(B){if(Object.keys){return Object.keys(B)}else{if(B!==Object(B)){throw new TypeError("Object.keys called on a non-object")}var D=[],C;for(C in B){if(Object.prototype.hasOwnProperty.call(B,C)){D.push(C)}}return D}},escape:function(B){return A("<div>").text(B).html()},itemsByValue:function(F,E,B){if(!E||F===null){return[]}B=B||"value";var D=A.isArray(F),C=[],G=this;A.each(E,function(H,I){if(I.children){C=C.concat(G.itemsByValue(F,I.children,B))}else{if(D){if(A.grep(F,function(J){return J==(I&&typeof I==="object"?I[B]:I)}).length){C.push(I)}}else{if(F==(I&&typeof I==="object"?I[B]:I)){C.push(I)}}}});return C},createInput:function(D){var E,C,B,F=D.type;if(F==="date"){if(D.mode==="inline"){if(A.fn.editabletypes.datefield){F="datefield"}else{if(A.fn.editabletypes.dateuifield){F="dateuifield"}}}else{if(A.fn.editabletypes.date){F="date"}else{if(A.fn.editabletypes.dateui){F="dateui"}}}if(F==="date"&&!A.fn.editabletypes.date){F="combodate"}}if(F==="datetime"&&D.mode==="inline"){F="datetimefield"}if(F==="wysihtml5"&&!A.fn.editabletypes[F]){F="textarea"}if(typeof A.fn.editabletypes[F]==="function"){E=A.fn.editabletypes[F];C=this.sliceObj(D,this.objectKeys(E.defaults));B=new E(C);return B}else{A.error("Unknown type: "+F);return false}}}}(window.jQuery));(function(C){var B=function(E,D){this.init(E,D)};var A=function(E,D){this.init(E,D)};B.prototype={containerName:null,innerCss:null,containerClass:"editable-container editable-popup",init:function(E,D){this.$element=C(E);this.options=C.extend({},C.fn.editableContainer.defaults,D);this.splitOptions();this.formOptions.scope=this.$element[0];this.initContainer();this.$element.on("destroyed",C.proxy(function(){this.destroy()},this));if(!C(document).data("editable-handlers-attached")){C(document).on("keyup.editable",function(F){if(F.which===27){C(".editable-open").editableContainer("hide")}});C(document).on("click.editable",function(G){var H=C(G.target),F,I=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(!C.contains(document.documentElement,G.target)){return}if(H.is(document)){return}for(F=0;F<I.length;F++){if(H.is(I[F])||H.parents(I[F]).length){return}}B.prototype.closeOthers(G.target)});C(document).data("editable-handlers-attached",true)}},splitOptions:function(){this.containerOptions={};this.formOptions={};if(!C.fn[this.containerName]){throw new Error(this.containerName+" not found. Have you included corresponding js file?")}var D=C.fn[this.containerName].defaults;for(var E in this.options){if(E in D){this.containerOptions[E]=this.options[E]}else{this.formOptions[E]=this.options[E]}}},tip:function(){return this.container()?this.container().$tip:null},container:function(){return this.$element.data(this.containerDataName||this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:C.proxy(this.save,this),nochange:C.proxy(function(){this.hide("nochange")},this),cancel:C.proxy(function(){this.hide("cancel")},this),show:C.proxy(this.setPosition,this),rendering:C.proxy(this.setPosition,this),resize:C.proxy(this.setPosition,this),rendered:C.proxy(function(){this.$element.triggerHandler("shown",this)},this)}).editableform("render")},show:function(D){this.$element.addClass("editable-open");if(D!==false){this.closeOthers(this.$element[0])}this.innerShow();this.tip().addClass(this.containerClass);if(this.$form){}this.$form=C("<div>");if(this.tip().is(this.innerCss)){this.tip().append(this.$form)}else{this.tip().find(this.innerCss).append(this.$form)}this.renderForm()},hide:function(D){if(!this.tip()||!this.tip().is(":visible")||!this.$element.hasClass("editable-open")){return}this.$element.removeClass("editable-open");this.innerHide();this.$element.triggerHandler("hidden",D||"manual")},innerShow:function(){},innerHide:function(){},toggle:function(D){if(this.container()&&this.tip()&&this.tip().is(":visible")){this.hide()}else{this.show(D)}},setPosition:function(){},save:function(D,E){this.$element.triggerHandler("save",E);this.hide("save")},option:function(D,E){this.options[D]=E;if(D in this.containerOptions){this.containerOptions[D]=E;this.setContainerOption(D,E)}else{this.formOptions[D]=E;if(this.$form){this.$form.editableform("option",D,E)}}},setContainerOption:function(D,E){this.call("option",D,E)},destroy:function(){this.hide();this.innerDestroy();this.$element.off("destroyed");this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(D){C(".editable-open").each(function(F,E){if(E===D||C(E).find(D).length){return}var G=C(E),H=G.data("editableContainer");if(!H){return}if(H.options.onblur==="cancel"){G.data("editableContainer").hide("onblur")}else{if(H.options.onblur==="submit"){G.data("editableContainer").tip().find("form").submit()}}})},activate:function(){if(this.tip&&this.tip().is(":visible")&&this.$form){this.$form.data("editableform").input.activate()}}};C.fn.editableContainer=function(D){var E=arguments;return this.each(function(){var H=C(this),F="editableContainer",J=H.data(F),I=typeof D==="object"&&D,G=(I.mode==="inline")?A:B;if(!J){H.data(F,(J=new G(this,I)))}if(typeof D==="string"){J[D].apply(J,Array.prototype.slice.call(E,1))}})};C.fn.editableContainer.Popup=B;C.fn.editableContainer.Inline=A;C.fn.editableContainer.defaults={value:null,placement:"top",autohide:true,onblur:"cancel",anim:false,mode:"popup"};jQuery.event.special.destroyed={remove:function(D){if(D.handler){D.handler()}}}}(window.jQuery));(function(A){A.extend(A.fn.editableContainer.Inline.prototype,A.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=A("<span></span>");if(!this.options.anim){this.options.anim=0}},splitOptions:function(){this.containerOptions={};this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide();this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,A.proxy(function(){this.$element.show();this.innerDestroy()},this))},innerDestroy:function(){if(this.tip()){this.tip().empty().remove()}}})}(window.jQuery));(function(B){var A=function(D,C){this.$element=B(D);this.options=B.extend({},B.fn.editable.defaults,C,B.fn.editableutils.getConfigData(this.$element));if(this.options.selector){this.initLive()}else{this.init()}};A.prototype={constructor:A,init:function(){var D=false,C,E;this.options.name=this.options.name||this.$element.attr("id");this.options.scope=this.$element[0];this.input=B.fn.editableutils.createInput(this.options);if(!this.input){return}if(this.options.value===undefined||this.options.value===null){this.value=this.input.html2value(B.trim(this.$element.html()));D=true}else{this.options.value=B.fn.editableutils.tryParseJson(this.options.value,true);if(typeof this.options.value==="string"){this.value=this.input.str2value(this.options.value)}else{this.value=this.options.value}}this.$element.addClass("editable");if(this.options.toggle!=="manual"){this.$element.addClass("editable-click");this.$element.on(this.options.toggle+".editable",B.proxy(function(F){F.preventDefault();if(this.options.toggle==="mouseenter"){this.show()}else{var G=(this.options.toggle!=="click");this.toggle(G)}},this))}else{this.$element.attr("tabindex",-1)}switch(this.options.autotext){case"always":C=true;break;case"auto":C=!B.trim(this.$element.text()).length&&this.value!==null&&this.value!==undefined&&!D;break;default:C=false}B.when(C?this.render():true).then(B.proxy(function(){if(this.options.disabled){this.disable()}else{this.enable()}this.$element.triggerHandler("init",this)},this))},initLive:function(){var C=this.options.selector;this.options.selector=false;this.options.autotext="never";this.$element.on(this.options.toggle+".editable",C,B.proxy(function(D){var E=B(D.target);if(!E.data("editable")){if(E.hasClass(this.options.emptyclass)){E.empty()}E.editable(this.options).trigger(D)}},this))},render:function(C){if(this.options.display===false){return}if(this.input.value2htmlFinal){return this.input.value2html(this.value,this.$element[0],this.options.display,C)}else{if(typeof this.options.display==="function"){return this.options.display.call(this.$element[0],this.value,C)}else{return this.input.value2html(this.value,this.$element[0])}}},enable:function(){this.options.disabled=false;this.$element.removeClass("editable-disabled");this.handleEmpty(this.isEmpty);if(this.options.toggle!=="manual"){if(this.$element.attr("tabindex")==="-1"){this.$element.removeAttr("tabindex")}}},disable:function(){this.options.disabled=true;this.hide();this.$element.addClass("editable-disabled");this.handleEmpty(this.isEmpty);this.$element.attr("tabindex",-1)},toggleDisabled:function(){if(this.options.disabled){this.enable()}else{this.disable()}},option:function(C,D){if(C&&typeof C==="object"){B.each(C,B.proxy(function(F,E){this.option(B.trim(F),E)},this));return}this.options[C]=D;if(C==="disabled"){return D?this.disable():this.enable()}if(C==="value"){this.setValue(D)}if(this.container){this.container.option(C,D)}if(this.input.option){this.input.option(C,D)}},handleEmpty:function(C){if(this.options.display===false){return}this.isEmpty=C!==undefined?C:B.trim(this.$element.text())==="";if(!this.options.disabled){if(this.isEmpty){this.$element.text(this.options.emptytext);if(this.options.emptyclass){this.$element.addClass(this.options.emptyclass)}}else{if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}}else{if(this.isEmpty){this.$element.empty();if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}}},show:function(C){if(this.options.disabled){return}if(!this.container){var D=B.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(D);this.$element.on("save.internal",B.proxy(this.save,this));this.container=this.$element.data("editableContainer")}else{if(this.container.tip().is(":visible")){return}}this.container.show(C)},hide:function(){if(this.container){this.container.hide()}},toggle:function(C){if(this.container&&this.container.tip().is(":visible")){this.hide()}else{this.show(C)}},save:function(D,E){if(this.options.unsavedclass){var C=false;C=C||typeof this.options.url==="function";C=C||this.options.display===false;C=C||E.response!==undefined;C=C||(this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(E.newValue));if(C){this.$element.removeClass(this.options.unsavedclass)}else{this.$element.addClass(this.options.unsavedclass)}}this.setValue(E.newValue,false,E.response)},validate:function(){if(typeof this.options.validate==="function"){return this.options.validate.call(this,this.value)}},setValue:function(C,E,D){if(E){this.value=this.input.str2value(C)}else{this.value=C}if(this.container){this.container.option("value",this.value)}B.when(this.render(D)).then(B.proxy(function(){this.handleEmpty()},this))},activate:function(){if(this.container){this.container.activate()}},destroy:function(){this.disable();if(this.container){this.container.destroy()}if(this.options.toggle!=="manual"){this.$element.removeClass("editable-click");this.$element.off(this.options.toggle+".editable")}this.$element.off("save.internal");this.$element.removeClass("editable editable-open editable-disabled");this.$element.removeData("editable")}};B.fn.editable=function(H){var E={},D=arguments,J="editable";switch(H){case"validate":this.each(function(){var K=B(this),M=K.data(J),L;if(M&&(L=M.validate())){E[M.options.name]=L}});return E;case"getValue":this.each(function(){var K=B(this),L=K.data(J);if(L&&L.value!==undefined&&L.value!==null){E[L.options.name]=L.input.value2submit(L.value)}});return E;case"submit":var C=arguments[1]||{},G=this,I=this.editable("validate"),F;if(B.isEmptyObject(I)){F=this.editable("getValue");if(C.data){B.extend(F,C.data)}B.ajax(B.extend({url:C.url,data:F,type:"POST"},C.ajaxOptions)).success(function(K){if(typeof C.success==="function"){C.success.call(G,K,C)}}).error(function(){if(typeof C.error==="function"){C.error.apply(G,arguments)}})}else{if(typeof C.error==="function"){C.error.call(G,I)}}return this}return this.each(function(){var K=B(this),M=K.data(J),L=typeof H==="object"&&H;if(!M){K.data(J,(M=new A(this,L)))}if(typeof H==="string"){M[H].apply(M,Array.prototype.slice.call(D,1))}})};B.fn.editable.defaults={type:"text",disabled:false,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null}}(window.jQuery));(function(B){B.fn.editabletypes={};var A=function(){};A.prototype={init:function(C,D,E){this.type=C;this.options=B.extend({},E,D)},prerender:function(){this.$tpl=B(this.options.tpl);this.$input=this.$tpl;this.$clear=null;this.error=null},render:function(){},value2html:function(C,D){B(D).text(C)},html2value:function(C){return B("<div>").html(C).text()},value2str:function(C){return C},str2value:function(C){return C},value2submit:function(C){return C},value2input:function(C){this.$input.val(C)},input2value:function(){return this.$input.val()},activate:function(){if(this.$input.is(":visible")){this.$input.focus()}},clear:function(){this.$input.val(null)},escape:function(C){return B("<div>").text(C).html()},autosubmit:function(){},setClass:function(){if(this.options.inputclass){this.$input.addClass(this.options.inputclass)}},setAttr:function(C){if(this.options[C]!==undefined&&this.options[C]!==null){this.$input.attr(C,this.options[C])}},option:function(C,D){this.options[C]=D}};A.defaults={tpl:"",inputclass:"input-medium",scope:null,showbuttons:true};B.extend(B.fn.editabletypes,{abstractinput:A})}(window.jQuery));(function(B){var A=function(C){};B.fn.editableutils.inherit(A,B.fn.editabletypes.abstractinput);B.extend(A.prototype,{render:function(){var C=B.Deferred();this.error=null;this.onSourceReady(function(){this.renderList();C.resolve()},function(){this.error=this.options.sourceError;C.resolve()});return C.promise()},html2value:function(C){return null},value2html:function(F,G,D,H){var E=B.Deferred(),C=function(){if(typeof D==="function"){D.call(G,F,this.sourceData,H)}else{this.value2htmlFinal(F,G)}E.resolve()};if(F===null){C.call(this)}else{this.onSourceReady(C,function(){E.resolve()})}return E.promise()},onSourceReady:function(C,H){if(B.isArray(this.sourceData)){C.call(this);return}try{this.options.source=B.fn.editableutils.tryParseJson(this.options.source,false)}catch(E){H.call(this);return}var F=this.options.source;if(B.isFunction(F)){F=F.call(this.options.scope)}if(typeof F==="string"){if(this.options.sourceCache){var G=F,D;if(!B(document).data(G)){B(document).data(G,{})}D=B(document).data(G);if(D.loading===false&&D.sourceData){this.sourceData=D.sourceData;this.doPrepend();C.call(this);return}else{if(D.loading===true){D.callbacks.push(B.proxy(function(){this.sourceData=D.sourceData;this.doPrepend();C.call(this)},this));D.err_callbacks.push(B.proxy(H,this));return}else{D.loading=true;D.callbacks=[];D.err_callbacks=[]}}}B.ajax({url:F,type:"get",cache:false,dataType:"json",success:B.proxy(function(I){if(D){D.loading=false}this.sourceData=this.makeArray(I);if(B.isArray(this.sourceData)){if(D){D.sourceData=this.sourceData;B.each(D.callbacks,function(){this.call()})}this.doPrepend();C.call(this)}else{H.call(this);if(D){B.each(D.err_callbacks,function(){this.call()})}}},this),error:B.proxy(function(){H.call(this);if(D){D.loading=false;B.each(D.err_callbacks,function(){this.call()})}},this)})}else{this.sourceData=this.makeArray(F);if(B.isArray(this.sourceData)){this.doPrepend();C.call(this)}else{H.call(this)}}},doPrepend:function(){if(this.options.prepend===null||this.options.prepend===undefined){return}if(!B.isArray(this.prependData)){if(B.isFunction(this.options.prepend)){this.options.prepend=this.options.prepend.call(this.options.scope)}this.options.prepend=B.fn.editableutils.tryParseJson(this.options.prepend,true);if(typeof this.options.prepend==="string"){this.options.prepend={"":this.options.prepend}}this.prependData=this.makeArray(this.options.prepend)}if(B.isArray(this.prependData)&&B.isArray(this.sourceData)){this.sourceData=this.prependData.concat(this.sourceData)}},renderList:function(){},value2htmlFinal:function(C,D){},makeArray:function(I){var D,F,E=[],G,H;if(!I||typeof I==="string"){return null}if(B.isArray(I)){H=function(K,J){F={value:K,text:J};if(D++>=2){return false}};for(var C=0;C<I.length;C++){G=I[C];if(typeof G==="object"){D=0;B.each(G,H);if(D===1){E.push(F)}else{if(D>1){if(G.children){G.children=this.makeArray(G.children)}E.push(G)}}}else{E.push({value:G,text:G})}}}else{B.each(I,function(K,J){E.push({value:K,text:J})})}return E},option:function(C,D){this.options[C]=D;if(C==="source"){this.sourceData=null}if(C==="prepend"){this.prependData=null}}});A.defaults=B.extend({},B.fn.editabletypes.abstractinput.defaults,{source:null,prepend:false,sourceError:"Error when loading list",sourceCache:true});B.fn.editabletypes.list=A}(window.jQuery));(function(B){var A=function(C){this.init("text",C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.abstractinput);B.extend(A.prototype,{render:function(){this.renderClear();this.setClass();this.setAttr("placeholder")},activate:function(){if(this.$input.is(":visible")){this.$input.focus();B.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length);if(this.toggleClear){this.toggleClear()}}},renderClear:function(){if(this.options.clear){this.$clear=B('<span class="editable-clear-x"></span>');this.$input.after(this.$clear).css("padding-right",24).keyup(B.proxy(function(C){if(~B.inArray(C.keyCode,[40,38,9,13,27])){return}clearTimeout(this.t);var D=this;this.t=setTimeout(function(){D.toggleClear(C)},100)},this)).parent().css("position","relative");this.$clear.click(B.proxy(this.clear,this))}},postrender:function(){},toggleClear:function(C){if(!this.$clear){return}var E=this.$input.val().length,D=this.$clear.is(":visible");if(E&&!D){this.$clear.show()}if(!E&&D){this.$clear.hide()}},clear:function(){this.$clear.hide();this.$input.val("").focus()}});A.defaults=B.extend({},B.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:true});B.fn.editabletypes.text=A}(window.jQuery));(function(B){var A=function(C){this.init("textarea",C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.abstractinput);B.extend(A.prototype,{render:function(){this.setClass();this.setAttr("placeholder");this.setAttr("rows");this.$input.keydown(function(C){if(C.ctrlKey&&C.which===13){B(this).closest("form").submit()}})},value2html:function(F,G){var C="",E;if(F){E=F.split("\n");for(var D=0;D<E.length;D++){E[D]=B("<div>").text(E[D]).html()}C=E.join("<br>")}B(G).html(C)},html2value:function(C){if(!C){return""}var D=new RegExp(String.fromCharCode(10),"g");var F=C.split(/<br\s*\/?>/i);for(var E=0;E<F.length;E++){var G=B("<div>").html(F[E]).text();G=G.replace(D,"");F[E]=G}return F.join("\n")},activate:function(){B.fn.editabletypes.text.prototype.activate.call(this)}});A.defaults=B.extend({},B.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7});B.fn.editabletypes.textarea=A}(window.jQuery));(function(B){var A=function(C){this.init("select",C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.list);B.extend(A.prototype,{renderList:function(){this.$input.empty();var C=function(E,F){if(B.isArray(F)){for(var D=0;D<F.length;D++){if(F[D].children){E.append(C(B("<optgroup>",{label:F[D].text}),F[D].children))}else{E.append(B("<option>",{value:F[D].value}).text(F[D].text))}}}return E};C(this.$input,this.sourceData);this.setClass();this.$input.on("keydown.editable",function(D){if(D.which===13){B(this).closest("form").submit()}})},value2htmlFinal:function(E,F){var D="",C=B.fn.editableutils.itemsByValue(E,this.sourceData);if(C.length){D=C[0].text}B(F).text(D)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){B(this).closest("form").submit()})}});A.defaults=B.extend({},B.fn.editabletypes.list.defaults,{tpl:"<select></select>"});B.fn.editabletypes.select=A}(window.jQuery));(function(B){var A=function(C){this.init("checklist",C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.list);B.extend(A.prototype,{renderList:function(){var E,D;this.$tpl.empty();if(!B.isArray(this.sourceData)){return}for(var C=0;C<this.sourceData.length;C++){E=B("<label>").append(B("<input>",{type:"checkbox",value:this.sourceData[C].value})).append(B("<span>").text(" "+this.sourceData[C].text));B("<div>").append(E).appendTo(this.$tpl)}this.$input=this.$tpl.find('input[type="checkbox"]');this.setClass()},value2str:function(C){return B.isArray(C)?C.sort().join(B.trim(this.options.separator)):""},str2value:function(D){var C,E=null;if(typeof D==="string"&&D.length){C=new RegExp("\\s*"+B.trim(this.options.separator)+"\\s*");E=D.split(C)}else{if(B.isArray(D)){E=D}else{E=[D]}}return E},value2input:function(C){this.$input.prop("checked",false);if(B.isArray(C)&&C.length){this.$input.each(function(E,D){var F=B(D);B.each(C,function(H,G){if(F.val()==G){F.prop("checked",true)}})})}},input2value:function(){var C=[];this.$input.filter(":checked").each(function(E,D){C.push(B(D).val())});return C},value2htmlFinal:function(E,F){var C=[],D=B.fn.editableutils.itemsByValue(E,this.sourceData);if(D.length){B.each(D,function(G,H){C.push(B.fn.editableutils.escape(H.text))});B(F).html(C.join("<br>"))}else{B(F).empty()}},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(C){if(C.which===13){B(this).closest("form").submit()}})}});A.defaults=B.extend({},B.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","});B.fn.editabletypes.checklist=A}(window.jQuery));(function(B){var A=function(C){this.init("password",C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.text);B.extend(A.prototype,{value2html:function(C,D){if(C){B(D).text("[hidden]")}else{B(D).empty()}},html2value:function(C){return null}});A.defaults=B.extend({},B.fn.editabletypes.text.defaults,{tpl:'<input type="password">'});B.fn.editabletypes.password=A}(window.jQuery));(function(B){var A=function(C){this.init("email",C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.text);A.defaults=B.extend({},B.fn.editabletypes.text.defaults,{tpl:'<input type="email">'});B.fn.editabletypes.email=A}(window.jQuery));(function(B){var A=function(C){this.init("url",C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.text);A.defaults=B.extend({},B.fn.editabletypes.text.defaults,{tpl:'<input type="url">'});B.fn.editabletypes.url=A}(window.jQuery));(function(B){var A=function(C){this.init("tel",C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.text);A.defaults=B.extend({},B.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'});B.fn.editabletypes.tel=A}(window.jQuery));(function(B){var A=function(C){this.init("number",C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.text);B.extend(A.prototype,{render:function(){A.superclass.render.call(this);this.setAttr("min");this.setAttr("max");this.setAttr("step")},postrender:function(){if(this.$clear){this.$clear.css({right:24})}}});A.defaults=B.extend({},B.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null});B.fn.editabletypes.number=A}(window.jQuery));(function(B){var A=function(C){this.init("range",C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.number);B.extend(A.prototype,{render:function(){this.$input=this.$tpl.filter("input");this.setClass();this.setAttr("min");this.setAttr("max");this.setAttr("step");this.$input.on("input",function(){B(this).siblings("output").text(B(this).val())})},activate:function(){this.$input.focus()}});A.defaults=B.extend({},B.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"});B.fn.editabletypes.range=A}(window.jQuery));(function(B){var A=function(D){this.init("select2",D,A.defaults);D.select2=D.select2||{};var C=this,E={placeholder:D.placeholder};this.isMultiple=D.select2.tags||D.select2.multiple;if(!D.select2.tags){if(D.source){E.data=D.source}E.initSelection=function(H,F){var G=C.str2value(H.val()),I=B.fn.editableutils.itemsByValue(G,E.data,"id");if(B.isArray(I)&&I.length&&!C.isMultiple){I=I[0]}F(I)}}this.options.select2=B.extend({},A.defaults.select2,E,D.select2)};B.fn.editableutils.inherit(A,B.fn.editabletypes.abstractinput);B.extend(A.prototype,{render:function(){this.setClass();this.$input.select2(this.options.select2);if("ajax" in this.options.select2){}if(this.isMultiple){this.$input.on("change",function(){B(this).closest("form").parent().triggerHandler("resize")})}},value2html:function(D,E){var C="",F;if(this.$input){F=this.$input.select2("data")}else{if(this.options.select2.tags){F=D}else{if(this.options.select2.data){F=B.fn.editableutils.itemsByValue(D,this.options.select2.data,"id")}else{}}}if(B.isArray(F)){C=[];B.each(F,function(H,G){C.push(G&&typeof G==="object"?G.text:G)})}else{if(F){C=F.text}}C=B.isArray(C)?C.join(this.options.viewseparator):C;B(E).text(C)},html2value:function(C){return this.options.select2.tags?this.str2value(C,this.options.viewseparator):null},value2input:function(C){this.$input.val(C).trigger("change",true)},input2value:function(){return this.$input.select2("val")},str2value:function(F,C){if(typeof F!=="string"||!this.isMultiple){return F}C=C||this.options.select2.separator||B.fn.select2.defaults.separator;var G,D,E;if(F===null||F.length<1){return null}G=F.split(C);for(D=0,E=G.length;D<E;D=D+1){G[D]=B.trim(G[D])}return G},autosubmit:function(){this.$input.on("change",function(D,C){if(!C){B(this).closest("form").submit()}})}});A.defaults=B.extend({},B.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "});B.fn.editabletypes.select2=A}(window.jQuery));(function(B){var A=function(D,C){this.$element=B(D);if(!this.$element.is("input")){B.error("Combodate should be applied to INPUT element");return}this.options=B.extend({},B.fn.combodate.defaults,C,this.$element.data());this.init()};A.prototype={constructor:A,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]};this.$widget=B('<span class="combodate"></span>').html(this.getTemplate());this.initCombos();this.$widget.on("change","select",B.proxy(function(){this.$element.val(this.getValue())},this));this.$widget.find("select").css("width","auto");this.$element.hide().after(this.$widget);this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var C=this.options.template;B.each(this.map,function(G,E){E=E[0];var D=new RegExp(E+"+"),F=E.length>1?E.substring(1,2):E;C=C.replace(D,"{"+F+"}")});C=C.replace(/ /g,"&nbsp;");B.each(this.map,function(F,E){E=E[0];var D=E.length>1?E.substring(1,2):E;C=C.replace("{"+D+"}",'<select class="'+F+'"></select>')});return C},initCombos:function(){var C=this;B.each(this.map,function(H,F){var D=C.$widget.find("."+H),E,G;if(D.length){C["$"+H]=D;E="fill"+H.charAt(0).toUpperCase()+H.slice(1);G=C[E]();C["$"+H].html(C.renderItems(G))}})},initItems:function(C){var F=[],E;if(this.options.firstItem==="name"){E=moment.relativeTime||moment.langData()._relativeTime;var D=typeof E[C]==="function"?E[C](1,true,C,false):E[C];D=D.split(" ").reverse()[0];F.push(["",D])}else{if(this.options.firstItem==="empty"){F.push(["",""])}}return F},renderItems:function(E){var D=[];for(var C=0;C<E.length;C++){D.push('<option value="'+E[C][0]+'">'+E[C][1]+"</option>")}return D.join("\n")},fillDay:function(){var E=this.initItems("d"),D,C,F=this.options.template.indexOf("DD")!==-1;for(C=1;C<=31;C++){D=F?this.leadZero(C):C;E.push([C,D])}return E},fillMonth:function(){var G=this.initItems("M"),E,C,F=this.options.template.indexOf("MMMM")!==-1,D=this.options.template.indexOf("MMM")!==-1,H=this.options.template.indexOf("MM")!==-1;for(C=0;C<=11;C++){if(F){E=moment().month(C).format("MMMM")}else{if(D){E=moment().month(C).format("MMM")}else{if(H){E=this.leadZero(C+1)}else{E=C+1}}}G.push([C,E])}return G},fillYear:function(){var F=[],D,C,E=this.options.template.indexOf("YYYY")!==-1;for(C=this.options.maxYear;C>=this.options.minYear;C--){D=E?C:(C+"").substring(2);F[this.options.yearDescending?"push":"unshift"]([C,D])}F=this.initItems("y").concat(F);return F},fillHour:function(){var G=this.initItems("h"),E,C,F=this.options.template.indexOf("h")!==-1,I=this.options.template.indexOf("H")!==-1,H=this.options.template.toLowerCase().indexOf("hh")!==-1,D=F?12:23;for(C=0;C<=D;C++){E=H?this.leadZero(C):C;G.push([C,E])}return G},fillMinute:function(){var E=this.initItems("m"),D,C,F=this.options.template.indexOf("mm")!==-1;for(C=0;C<=59;C+=this.options.minuteStep){D=F?this.leadZero(C):C;E.push([C,D])}return E},fillSecond:function(){var E=this.initItems("s"),D,C,F=this.options.template.indexOf("ss")!==-1;for(C=0;C<=59;C+=this.options.secondStep){D=F?this.leadZero(C):C;E.push([C,D])}return E},fillAmpm:function(){var C=this.options.template.indexOf("a")!==-1,D=this.options.template.indexOf("A")!==-1,E=[["am",C?"am":"AM"],["pm",C?"pm":"PM"]];return E},getValue:function(D){var C,G={},E=this,F=false;B.each(this.map,function(J,H){if(J==="ampm"){return}var I=J==="day"?1:0;G[J]=E["$"+J]?parseInt(E["$"+J].val(),10):I;if(isNaN(G[J])){F=true;return false}});if(F){return""}if(this.$ampm){G.hour=this.$ampm.val()==="am"?G.hour:G.hour+12;if(G.hour===24){G.hour=0}}C=moment([G.year,G.month,G.day,G.hour,G.minute,G.second]);this.highlight(C);D=D===undefined?this.options.format:D;if(D===null){return C.isValid()?C:null}else{return C.isValid()?C.format(D):""}},setValue:function(F){if(!F){return}var C=typeof F==="string"?moment(F,this.options.format):moment(F),D=this,G={};function E(J,H){var I={};J.children("option").each(function(K,L){var M=B(L).attr("value"),N;if(M===""){return}N=Math.abs(M-H);if(typeof I.distance==="undefined"||N<I.distance){I={value:M,distance:N}}});return I.value}if(C.isValid()){B.each(this.map,function(I,H){if(I==="ampm"){return}G[I]=C[H[1]]()});if(this.$ampm){if(G.hour>12){G.hour-=12;G.ampm="pm"}else{G.ampm="am"}}B.each(G,function(I,H){if(D["$"+I]){if(I==="minute"&&D.options.minuteStep>1&&D.options.roundTime){H=E(D["$"+I],H)}if(I==="second"&&D.options.secondStep>1&&D.options.roundTime){H=E(D["$"+I],H)}D["$"+I].val(H)}});this.$element.val(C.format(this.options.format))}},highlight:function(C){if(!C.isValid()){if(this.options.errorClass){this.$widget.addClass(this.options.errorClass)}else{if(!this.borderColor){this.borderColor=this.$widget.find("select").css("border-color")}this.$widget.find("select").css("border-color","red")}}else{if(this.options.errorClass){this.$widget.removeClass(this.options.errorClass)}else{this.$widget.find("select").css("border-color",this.borderColor)}}},leadZero:function(C){return C<=9?"0"+C:C},destroy:function(){this.$widget.remove();this.$element.removeData("combodate").show()}};B.fn.combodate=function(C){var D,E=Array.apply(null,arguments);E.shift();if(C==="getValue"&&this.length&&(D=this.eq(0).data("combodate"))){return D.getValue.apply(D,E)}return this.each(function(){var F=B(this),H=F.data("combodate"),G=typeof C=="object"&&C;if(!H){F.data("combodate",(H=new A(this,G)))}if(typeof C=="string"&&typeof H[C]=="function"){H[C].apply(H,E)}})};B.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:true,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:true}}(window.jQuery));(function(B){var A=function(C){this.init("combodate",C,A.defaults);if(!this.options.viewformat){this.options.viewformat=this.options.format}C.combodate=B.fn.editableutils.tryParseJson(C.combodate,true);this.options.combodate=B.extend({},A.defaults.combodate,C.combodate,{format:this.options.format,template:this.options.template})};B.fn.editableutils.inherit(A,B.fn.editabletypes.abstractinput);B.extend(A.prototype,{render:function(){this.$input.combodate(this.options.combodate)},value2html:function(D,E){var C=D?D.format(this.options.viewformat):"";B(E).text(C)},html2value:function(C){return C?moment(C,this.options.viewformat):null},value2str:function(C){return C?C.format(this.options.format):""},str2value:function(C){return C?moment(C,this.options.format):null},value2submit:function(C){return this.value2str(C)},value2input:function(C){this.$input.combodate("setValue",C)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}});A.defaults=B.extend({},B.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null});B.fn.editabletypes.combodate=A}(window.jQuery));(function(A){A.extend(A.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=A(A.fn.editableform.template);this.$form.find(".editable-error-block").addClass("help-block")}});A.fn.editableform.buttons='<button type="submit" class="btn btn-primary editable-submit"><i class="icon-ok icon-white"></i></button><button type="button" class="btn editable-cancel"><i class="icon-remove"></i></button>';A.fn.editableform.errorGroupClass="error";A.fn.editableform.errorBlockClass=null}(window.jQuery));(function(A){A.extend(A.fn.editableContainer.Popup.prototype,{containerName:"popover",innerCss:A.fn.popover&&A(A.fn.popover.defaults.template).find("p").length?".popover-content p":".popover-content",initContainer:function(){A.extend(this.containerOptions,{trigger:"manual",selector:false,content:" ",template:A.fn.popover.defaults.template});var B;if(this.$element.data("template")){B=this.$element.data("template");this.$element.removeData("template")}this.call(this.containerOptions);if(B){this.$element.data("template",B)}},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(B,C){this.container().options[B]=C},setPosition:function(){(function(){var H=this.tip(),D,E,F,G,C,B;C=typeof this.options.placement==="function"?this.options.placement.call(this,H[0],this.$element[0]):this.options.placement;D=/in/.test(C);H.removeClass("top right bottom left").css({top:0,left:0,display:"block"});E=this.getPosition(D);F=H[0].offsetWidth;G=H[0].offsetHeight;switch(D?C.split(" ")[1]:C){case"bottom":B={top:E.top+E.height,left:E.left+E.width/2-F/2};break;case"top":B={top:E.top-G,left:E.left+E.width/2-F/2};break;case"left":B={top:E.top+E.height/2-G/2,left:E.left-F};break;case"right":B={top:E.top+E.height/2-G/2,left:E.left+E.width};break}H.offset(B).addClass(C).addClass("in")}).call(this.container())}})}(window.jQuery));(function(B){var A=function(C){this.init("date",C,A.defaults);this.initPicker(C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.abstractinput);B.extend(A.prototype,{initPicker:function(C,D){if(!this.options.viewformat){this.options.viewformat=this.options.format}this.options.datepicker=B.extend({},D.datepicker,C.datepicker,{format:this.options.viewformat});this.options.datepicker.language=this.options.datepicker.language||"en";this.dpg=B.fn.datepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.datepicker(this.options.datepicker);if(this.options.clear){this.$clear=B('<a href="#"></a>').html(this.options.clear).click(B.proxy(function(C){C.preventDefault();C.stopPropagation();this.clear()},this));this.$tpl.parent().append(B('<div class="editable-clear">').append(this.$clear))}},value2html:function(D,E){var C=D?this.dpg.formatDate(D,this.parsedViewFormat,this.options.datepicker.language):"";A.superclass.value2html(C,E)},html2value:function(C){return C?this.dpg.parseDate(C,this.parsedViewFormat,this.options.datepicker.language):null},value2str:function(C){return C?this.dpg.formatDate(C,this.parsedFormat,this.options.datepicker.language):""},str2value:function(C){return C?this.dpg.parseDate(C,this.parsedFormat,this.options.datepicker.language):null},value2submit:function(C){return this.value2str(C)},value2input:function(C){this.$input.datepicker("update",C)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".day",function(D){if(B(D.currentTarget).is(".old")||B(D.currentTarget).is(".new")){return}var C=B(this).closest("form");setTimeout(function(){C.submit()},200)})}});A.defaults=B.extend({},B.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:false},clear:"&times; clear"});B.fn.editabletypes.date=A}(window.jQuery));(function(B){var A=function(C){this.init("datefield",C,A.defaults);this.initPicker(C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.date);B.extend(A.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.datepicker(this.options.datepicker);this.$input.off("focus keydown");this.$input.keyup(B.proxy(function(){this.$tpl.removeData("date");this.$tpl.datepicker("update")},this))},value2input:function(C){this.$input.val(C?this.dpg.formatDate(C,this.parsedViewFormat,this.options.datepicker.language):"");this.$tpl.datepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){B.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});A.defaults=B.extend({},B.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:true}});B.fn.editabletypes.datefield=A}(window.jQuery));!function(F){function E(){return new Date(Date.UTC.apply(Date,arguments))}function C(){var G=new Date();return E(G.getUTCFullYear(),G.getUTCMonth(),G.getUTCDate())}var D=function(I,H){var G=this;this.element=F(I);this.language=H.language||this.element.data("date-language")||"en";this.language=this.language in B?this.language:this.language.split("-")[0];this.language=this.language in B?this.language:"en";this.isRTL=B[this.language].rtl||false;this.format=A.parseFormat(H.format||this.element.data("date-format")||B[this.language].format||"mm/dd/yyyy");this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.forceParse=true;if("forceParse" in H){this.forceParse=H.forceParse}else{if("dateForceParse" in this.element.data()){this.forceParse=this.element.data("date-force-parse")}}this.picker=F(A.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.isRTL){this.picker.addClass("datepicker-rtl");this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")}this.autoclose=false;if("autoclose" in H){this.autoclose=H.autoclose}else{if("dateAutoclose" in this.element.data()){this.autoclose=this.element.data("date-autoclose")}}this.keyboardNavigation=true;if("keyboardNavigation" in H){this.keyboardNavigation=H.keyboardNavigation}else{if("dateKeyboardNavigation" in this.element.data()){this.keyboardNavigation=this.element.data("date-keyboard-navigation")}}this.viewMode=this.startViewMode=0;switch(H.startView||this.element.data("date-start-view")){case 2:case"decade":this.viewMode=this.startViewMode=2;break;case 1:case"year":this.viewMode=this.startViewMode=1;break}this.minViewMode=H.minViewMode||this.element.data("date-min-view-mode")||0;if(typeof this.minViewMode==="string"){switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0;break}}this.viewMode=this.startViewMode=Math.max(this.startViewMode,this.minViewMode);this.todayBtn=(H.todayBtn||this.element.data("date-today-btn")||false);this.todayHighlight=(H.todayHighlight||this.element.data("date-today-highlight")||false);this.calendarWeeks=false;if("calendarWeeks" in H){this.calendarWeeks=H.calendarWeeks}else{if("dateCalendarWeeks" in this.element.data()){this.calendarWeeks=this.element.data("date-calendar-weeks")}}if(this.calendarWeeks){this.picker.find("tfoot th.today").attr("colspan",function(J,K){return parseInt(K)+1})}this._allow_update=false;this.weekStart=((H.weekStart||this.element.data("date-weekstart")||B[this.language].weekStart||0)%7);this.weekEnd=((this.weekStart+6)%7);this.startDate=-Infinity;this.endDate=Infinity;this.daysOfWeekDisabled=[];this.setStartDate(H.startDate||this.element.data("date-startdate"));this.setEndDate(H.endDate||this.element.data("date-enddate"));this.setDaysOfWeekDisabled(H.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};D.prototype={constructor:D,_events:[],_secondaryEvents:[],_applyEvents:function(I){for(var H=0,G,J;H<I.length;H++){G=I[H][0];J=I[H][1];G.on(J)}},_unapplyEvents:function(I){for(var H=0,G,J;H<I.length;H++){G=I[H][0];J=I[H][1];G.off(J)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:F.proxy(this.show,this),keyup:F.proxy(this.update,this),keydown:F.proxy(this.keydown,this)}]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:F.proxy(this.show,this),keyup:F.proxy(this.update,this),keydown:F.proxy(this.keydown,this)}],[this.component,{click:F.proxy(this.show,this)}]]}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:F.proxy(this.show,this)}]]}}}this._secondaryEvents=[[this.picker,{click:F.proxy(this.click,this)}],[F(window),{resize:F.proxy(this.place,this)}],[F(document),{mousedown:F.proxy(function(G){if(F(G.target).closest(".datepicker.datepicker-inline, .datepicker.datepicker-dropdown").length===0){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},show:function(G){if(!this.isInline){this.picker.appendTo("body")}this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();if(G){G.preventDefault()}this.element.trigger({type:"show",date:this.date})},hide:function(G){if(this.isInline){return}if(!this.picker.is(":visible")){return}this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.startViewMode;this.showMode();if(this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this.element.trigger({type:"hide",date:this.date})},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},getDate:function(){var G=this.getUTCDate();return new Date(G.getTime()+(G.getTimezoneOffset()*60000))},getUTCDate:function(){return this.date},setDate:function(G){this.setUTCDate(new Date(G.getTime()-(G.getTimezoneOffset()*60000)))},setUTCDate:function(G){this.date=G;this.setValue()},setValue:function(){var G=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(G)}this.element.data("date",G)}else{this.element.val(G)}},getFormattedDate:function(G){if(G===undefined){G=this.format}return A.formatDate(this.date,G,this.language)},setStartDate:function(G){this.startDate=G||-Infinity;if(this.startDate!==-Infinity){this.startDate=A.parseDate(this.startDate,this.format,this.language)}this.update();this.updateNavArrows()},setEndDate:function(G){this.endDate=G||Infinity;if(this.endDate!==Infinity){this.endDate=A.parseDate(this.endDate,this.format,this.language)}this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(G){this.daysOfWeekDisabled=G||[];if(!F.isArray(this.daysOfWeekDisabled)){this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)}this.daysOfWeekDisabled=F.map(this.daysOfWeekDisabled,function(H){return parseInt(H,10)});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return}var H=parseInt(this.element.parents().filter(function(){return F(this).css("z-index")!="auto"}).first().css("z-index"))+10;var G=this.component?this.component.parent().offset():this.element.offset();var I=this.component?this.component.outerHeight(true):this.element.outerHeight(true);this.picker.css({top:G.top+I,left:G.left,zIndex:H})},_allow_update:true,update:function(){if(!this._allow_update){return}var H,G=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0] instanceof Date)){H=arguments[0];G=true}else{H=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val()}this.date=A.parseDate(H,this.format,this.language);if(G){this.setValue()}if(this.date<this.startDate){this.viewDate=new Date(this.startDate)}else{if(this.date>this.endDate){this.viewDate=new Date(this.endDate)}else{this.viewDate=new Date(this.date)}}this.fill()},fillDow:function(){var I=this.weekStart,G="<tr>";if(this.calendarWeeks){var H='<th class="cw">&nbsp;</th>';G+=H;this.picker.find(".datepicker-days thead tr:first-child").prepend(H)}while(I<this.weekStart+7){G+='<th class="dow">'+B[this.language].daysMin[(I++)%7]+"</th>"}G+="</tr>";this.picker.find(".datepicker-days thead").append(G)},fillMonths:function(){var G="",H=0;while(H<12){G+='<span class="month">'+B[this.language].monthsShort[H++]+"</span>"}this.picker.find(".datepicker-months td").html(G)},fill:function(){var S=new Date(this.viewDate),U=S.getUTCFullYear(),Y=S.getUTCMonth(),I=this.startDate!==-Infinity?this.startDate.getUTCFullYear():-Infinity,G=this.startDate!==-Infinity?this.startDate.getUTCMonth():-Infinity,Q=this.endDate!==Infinity?this.endDate.getUTCFullYear():Infinity,J=this.endDate!==Infinity?this.endDate.getUTCMonth():Infinity,V=this.date&&this.date.valueOf(),N=new Date();this.picker.find(".datepicker-days thead th.switch").text(B[this.language].months[Y]+" "+U);this.picker.find("tfoot th.today").text(B[this.language].today).toggle(this.todayBtn!==false);this.updateNavArrows();this.fillMonths();var a=E(U,Y-1,28,0,0,0,0),W=A.getDaysInMonth(a.getUTCFullYear(),a.getUTCMonth());a.setUTCDate(W);a.setUTCDate(W-(a.getUTCDay()-this.weekStart+7)%7);var O=new Date(a);O.setUTCDate(O.getUTCDate()+42);O=O.valueOf();var T=[];var R;while(a.valueOf()<O){if(a.getUTCDay()==this.weekStart){T.push("<tr>");if(this.calendarWeeks){var H=new Date(+a+(this.weekStart-a.getUTCDay()-7)%7*86400000),K=new Date(+H+(7+4-H.getUTCDay())%7*86400000),M=new Date(+(M=E(K.getUTCFullYear(),0,1))+(7+4-M.getUTCDay())%7*86400000),P=(K-M)/86400000/7+1;T.push('<td class="cw">'+P+"</td>")}}R="";if(a.getUTCFullYear()<U||(a.getUTCFullYear()==U&&a.getUTCMonth()<Y)){R+=" old"}else{if(a.getUTCFullYear()>U||(a.getUTCFullYear()==U&&a.getUTCMonth()>Y)){R+=" new"}}if(this.todayHighlight&&a.getUTCFullYear()==N.getFullYear()&&a.getUTCMonth()==N.getMonth()&&a.getUTCDate()==N.getDate()){R+=" today"}if(V&&a.valueOf()==V){R+=" active"}if(a.valueOf()<this.startDate||a.valueOf()>this.endDate||F.inArray(a.getUTCDay(),this.daysOfWeekDisabled)!==-1){R+=" disabled"}T.push('<td class="day'+R+'">'+a.getUTCDate()+"</td>");if(a.getUTCDay()==this.weekEnd){T.push("</tr>")}a.setUTCDate(a.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(T.join(""));var b=this.date&&this.date.getUTCFullYear();var Z=this.picker.find(".datepicker-months").find("th:eq(1)").text(U).end().find("span").removeClass("active");if(b&&b==U){Z.eq(this.date.getUTCMonth()).addClass("active")}if(U<I||U>Q){Z.addClass("disabled")}if(U==I){Z.slice(0,G).addClass("disabled")}if(U==Q){Z.slice(J+1).addClass("disabled")}T="";U=parseInt(U/10,10)*10;var L=this.picker.find(".datepicker-years").find("th:eq(1)").text(U+"-"+(U+9)).end().find("td");U-=1;for(var X=-1;X<11;X++){T+='<span class="year'+(X==-1||X==10?" old":"")+(b==U?" active":"")+(U<I||U>Q?" disabled":"")+'">'+U+"</span>";U+=1}L.html(T)},updateNavArrows:function(){if(!this._allow_update){return}var G=new Date(this.viewDate),I=G.getUTCFullYear(),H=G.getUTCMonth();switch(this.viewMode){case 0:if(this.startDate!==-Infinity&&I<=this.startDate.getUTCFullYear()&&H<=this.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&I>=this.endDate.getUTCFullYear()&&H>=this.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.startDate!==-Infinity&&I<=this.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&I>=this.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(G){G.preventDefault();var L=F(G.target).closest("span, td, th");if(L.length==1){switch(L[0].nodeName.toLowerCase()){case"th":switch(L[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var I=A.modes[this.viewMode].navStep*(L[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,I);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,I);break}this.fill();break;case"today":var N=new Date();N=E(N.getFullYear(),N.getMonth(),N.getDate(),0,0,0);this.showMode(-2);var K=this.todayBtn=="linked"?null:"view";this._setDate(N,K);break}break;case"span":if(!L.is(".disabled")){this.viewDate.setUTCDate(1);if(L.is(".month")){var J=1;var H=L.parent().find("span").index(L);var M=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(H);this.element.trigger({type:"changeMonth",date:this.viewDate});if(this.minViewMode==1){this._setDate(E(M,H,J,0,0,0,0))}}else{var M=parseInt(L.text(),10)||0;var J=1;var H=0;this.viewDate.setUTCFullYear(M);this.element.trigger({type:"changeYear",date:this.viewDate});if(this.minViewMode==2){this._setDate(E(M,H,J,0,0,0,0))}}this.showMode(-1);this.fill()}break;case"td":if(L.is(".day")&&!L.is(".disabled")){var J=parseInt(L.text(),10)||1;var M=this.viewDate.getUTCFullYear(),H=this.viewDate.getUTCMonth();if(L.is(".old")){if(H===0){H=11;M-=1}else{H-=1}}else{if(L.is(".new")){if(H==11){H=0;M+=1}else{H+=1}}}this._setDate(E(M,H,J,0,0,0,0))}break}}},_setDate:function(I,G){if(!G||G=="date"){this.date=I}if(!G||G=="view"){this.viewDate=I}this.fill();this.setValue();this.element.trigger({type:"changeDate",date:this.date});var H;if(this.isInput){H=this.element}else{if(this.component){H=this.element.find("input")}}if(H){H.change();if(this.autoclose&&(!G||G=="date")){this.hide()}}},moveMonth:function(O,J){if(!J){return O}var M=new Date(O.valueOf()),K=M.getUTCDate(),G=M.getUTCMonth(),I=Math.abs(J),H,N;J=J>0?1:-1;if(I==1){N=J==-1?function(){return M.getUTCMonth()==G}:function(){return M.getUTCMonth()!=H};H=G+J;M.setUTCMonth(H);if(H<0||H>11){H=(H+12)%12}}else{for(var L=0;L<I;L++){M=this.moveMonth(M,J)}H=M.getUTCMonth();M.setUTCDate(K);N=function(){return H!=M.getUTCMonth()}}while(N()){M.setUTCDate(--K);M.setUTCMonth(H)}return M},moveYear:function(H,G){return this.moveMonth(H,G*12)},dateWithinRange:function(G){return G>=this.startDate&&G<=this.endDate},keydown:function(J){if(this.picker.is(":not(:visible)")){if(J.keyCode==27){this.show()}return}var G=false,K,L,I,N,M;switch(J.keyCode){case 27:this.hide();J.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation){break}K=J.keyCode==37?-1:1;if(J.ctrlKey){N=this.moveYear(this.date,K);M=this.moveYear(this.viewDate,K)}else{if(J.shiftKey){N=this.moveMonth(this.date,K);M=this.moveMonth(this.viewDate,K)}else{N=new Date(this.date);N.setUTCDate(this.date.getUTCDate()+K);M=new Date(this.viewDate);M.setUTCDate(this.viewDate.getUTCDate()+K)}}if(this.dateWithinRange(N)){this.date=N;this.viewDate=M;this.setValue();this.update();J.preventDefault();G=true}break;case 38:case 40:if(!this.keyboardNavigation){break}K=J.keyCode==38?-1:1;if(J.ctrlKey){N=this.moveYear(this.date,K);M=this.moveYear(this.viewDate,K)}else{if(J.shiftKey){N=this.moveMonth(this.date,K);M=this.moveMonth(this.viewDate,K)}else{N=new Date(this.date);N.setUTCDate(this.date.getUTCDate()+K*7);M=new Date(this.viewDate);M.setUTCDate(this.viewDate.getUTCDate()+K*7)}}if(this.dateWithinRange(N)){this.date=N;this.viewDate=M;this.setValue();this.update();J.preventDefault();G=true}break;case 13:this.hide();J.preventDefault();break;case 9:this.hide();break}if(G){this.element.trigger({type:"changeDate",date:this.date});var H;if(this.isInput){H=this.element}else{if(this.component){H=this.element.find("input")}}if(H){H.change()}}},showMode:function(G){if(G){this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+G))}this.picker.find(">div").hide().filter(".datepicker-"+A.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};F.fn.datepicker=function(G){var H=Array.apply(null,arguments);H.shift();return this.each(function(){var I=F(this),K=I.data("datepicker"),J=typeof G=="object"&&G;if(!K){I.data("datepicker",(K=new D(this,F.extend({},F.fn.datepicker.defaults,J))))}if(typeof G=="string"&&typeof K[G]=="function"){K[G].apply(K,H)}})};F.fn.datepicker.defaults={};F.fn.datepicker.Constructor=D;var B=F.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today"}};var A={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(G){return(((G%4===0)&&(G%100!==0))||(G%400===0))},getDaysInMonth:function(H,G){return[31,(A.isLeapYear(H)?29:28),31,30,31,30,31,31,30,31,30,31][G]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(H){var I=H.replace(this.validParts,"\0").split("\0"),G=H.match(this.validParts);if(!I||!I.length||!G||G.length===0){throw new Error("Invalid date format.")}return{separators:I,parts:G}},parseDate:function(V,K,T){if(V instanceof Date){return V}if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(V)){var H=/([\-+]\d+)([dmwy])/,Q=V.match(/([\-+]\d+)([dmwy])/g),R,I;V=new Date();for(var N=0;N<Q.length;N++){R=H.exec(Q[N]);I=parseInt(R[1]);switch(R[2]){case"d":V.setUTCDate(V.getUTCDate()+I);break;case"m":V=D.prototype.moveMonth.call(D.prototype,V,I);break;case"w":V.setUTCDate(V.getUTCDate()+I*7);break;case"y":V=D.prototype.moveYear.call(D.prototype,V,I);break}}return E(V.getUTCFullYear(),V.getUTCMonth(),V.getUTCDate(),0,0,0)}var Q=V&&V.match(this.nonpunctuation)||[],V=new Date(),S={},M=["yyyy","yy","M","MM","m","mm","d","dd"],G={yyyy:function(W,X){return W.setUTCFullYear(X)},yy:function(W,X){return W.setUTCFullYear(2000+X)},m:function(W,X){X-=1;while(X<0){X+=12}X%=12;W.setUTCMonth(X);while(W.getUTCMonth()!=X){W.setUTCDate(W.getUTCDate()-1)}return W},d:function(W,X){return W.setUTCDate(X)}},J,U,R;G["M"]=G["MM"]=G["mm"]=G["m"];G["dd"]=G["d"];V=E(V.getFullYear(),V.getMonth(),V.getDate(),0,0,0);var O=K.parts.slice();if(Q.length!=O.length){O=F(O).filter(function(W,X){return F.inArray(X,M)!==-1}).toArray()}if(Q.length==O.length){for(var N=0,P=O.length;N<P;N++){J=parseInt(Q[N],10);R=O[N];if(isNaN(J)){switch(R){case"MM":U=F(B[T].months).filter(function(){var X=this.slice(0,Q[N].length),W=Q[N].slice(0,X.length);return X==W});J=F.inArray(U[0],B[T].months)+1;break;case"M":U=F(B[T].monthsShort).filter(function(){var X=this.slice(0,Q[N].length),W=Q[N].slice(0,X.length);return X==W});J=F.inArray(U[0],B[T].monthsShort)+1;break}}S[R]=J}for(var N=0,L;N<M.length;N++){L=M[N];if(L in S&&!isNaN(S[L])){G[L](V,S[L])}}}return V},formatDate:function(L,H,G){var K={d:L.getUTCDate(),D:B[G].daysShort[L.getUTCDay()],DD:B[G].days[L.getUTCDay()],m:L.getUTCMonth()+1,M:B[G].monthsShort[L.getUTCMonth()],MM:B[G].months[L.getUTCMonth()],yy:L.getUTCFullYear().toString().substring(2),yyyy:L.getUTCFullYear()};K.dd=(K.d<10?"0":"")+K.d;K.mm=(K.m<10?"0":"")+K.m;var L=[],M=F.extend([],H.separators);for(var I=0,J=H.parts.length;I<J;I++){if(M.length){L.push(M.shift())}L.push(K[H.parts[I]])}return L.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};A.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+A.headTemplate+"<tbody></tbody>"+A.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+A.headTemplate+A.contTemplate+A.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+A.headTemplate+A.contTemplate+A.footTemplate+"</table></div></div>";F.fn.datepicker.DPGlobal=A}(window.jQuery);(function(B){var A=function(C){this.init("datetime",C,A.defaults);this.initPicker(C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.abstractinput);B.extend(A.prototype,{initPicker:function(C,D){if(!this.options.viewformat){this.options.viewformat=this.options.format}this.options.datetimepicker=B.extend({},D.datetimepicker,C.datetimepicker,{format:this.options.viewformat});this.options.datetimepicker.language=this.options.datetimepicker.language||"en";this.dpg=B.fn.datetimepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType);this.options.datetimepicker.startView=this.options.startView;this.options.datetimepicker.minView=this.options.minView;this.options.datetimepicker.maxView=this.options.maxView},render:function(){this.$input.datetimepicker(this.options.datetimepicker);if(this.options.clear){this.$clear=B('<a href="#"></a>').html(this.options.clear).click(B.proxy(function(C){C.preventDefault();C.stopPropagation();this.clear()},this));this.$tpl.parent().append(B('<div class="editable-clear">').append(this.$clear))}},value2html:function(D,E){var C=D?this.dpg.formatDate(this.toUTC(D),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(E){A.superclass.value2html(C,E)}else{return C}},html2value:function(C){var D=C?this.dpg.parseDate(C,this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):null;return D?this.fromUTC(D):null},value2str:function(C){return C?this.dpg.formatDate(this.toUTC(C),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(C){var D=C?this.dpg.parseDate(C,this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):null;return D?this.fromUTC(D):null},value2submit:function(C){return this.value2str(C)},value2input:function(C){if(C){this.$input.data("datetimepicker").setDate(C)}},input2value:function(){var C=this.$input.data("datetimepicker");return C.date?C.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".minute",function(D){var C=B(this).closest("form");setTimeout(function(){C.submit()},200)})},toUTC:function(C){return C?new Date(C.valueOf()-C.getTimezoneOffset()*60000):C},fromUTC:function(C){return C?new Date(C.valueOf()+C.getTimezoneOffset()*60000):C}});A.defaults=B.extend({},B.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:false,autoclose:false},clear:"&times; clear"});B.fn.editabletypes.datetime=A}(window.jQuery));(function(B){var A=function(C){this.init("datetimefield",C,A.defaults);this.initPicker(C,A.defaults)};B.fn.editableutils.inherit(A,B.fn.editabletypes.datetime);B.extend(A.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.datetimepicker(this.options.datetimepicker);this.$input.off("focus keydown");this.$input.keyup(B.proxy(function(){this.$tpl.removeData("date");this.$tpl.datetimepicker("update")},this))},value2input:function(C){this.$input.val(this.value2html(C));this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){B.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});A.defaults=B.extend({},B.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:false,autoclose:true}});B.fn.editabletypes.datetimefield=A}(window.jQuery));(function(B){var A=function(C){this.init("typeahead",C,A.defaults);this.options.typeahead=B.extend({},A.defaults.typeahead,{matcher:this.matcher,sorter:this.sorter,highlighter:this.highlighter,updater:this.updater},C.typeahead)};B.fn.editableutils.inherit(A,B.fn.editabletypes.list);B.extend(A.prototype,{renderList:function(){this.$input=this.$tpl.is("input")?this.$tpl:this.$tpl.find('input[type="text"]');this.options.typeahead.source=this.sourceData;this.$input.typeahead(this.options.typeahead);var C=this.$input.data("typeahead");C.render=B.proxy(this.typeaheadRender,C);C.select=B.proxy(this.typeaheadSelect,C);C.move=B.proxy(this.typeaheadMove,C);this.renderClear();this.setClass();this.setAttr("placeholder")},value2htmlFinal:function(D,E){if(this.getIsObjects()){var C=B.fn.editableutils.itemsByValue(D,this.sourceData);B(E).text(C.length?C[0].text:"")}else{B(E).text(D)}},html2value:function(C){return C?C:null},value2input:function(D){if(this.getIsObjects()){var C=B.fn.editableutils.itemsByValue(D,this.sourceData);this.$input.data("value",D).val(C.length?C[0].text:"")}else{this.$input.val(D)}},input2value:function(){if(this.getIsObjects()){var D=this.$input.data("value"),C=B.fn.editableutils.itemsByValue(D,this.sourceData);if(C.length&&C[0].text.toLowerCase()===this.$input.val().toLowerCase()){return D}else{return null}}else{return this.$input.val()}},getIsObjects:function(){if(this.isObjects===undefined){this.isObjects=false;for(var C=0;C<this.sourceData.length;C++){if(this.sourceData[C].value!==this.sourceData[C].text){this.isObjects=true;break}}}return this.isObjects},activate:B.fn.editabletypes.text.prototype.activate,renderClear:B.fn.editabletypes.text.prototype.renderClear,postrender:B.fn.editabletypes.text.prototype.postrender,toggleClear:B.fn.editabletypes.text.prototype.toggleClear,clear:function(){B.fn.editabletypes.text.prototype.clear.call(this);this.$input.data("value","")},matcher:function(C){return B.fn.typeahead.Constructor.prototype.matcher.call(this,C.text)},sorter:function(F){var G=[],H=[],D=[],E,C;while(E=F.shift()){C=E.text;if(!C.toLowerCase().indexOf(this.query.toLowerCase())){G.push(E)}else{if(~C.indexOf(this.query)){H.push(E)}else{D.push(E)}}}return G.concat(H,D)},highlighter:function(C){return B.fn.typeahead.Constructor.prototype.highlighter.call(this,C.text)},updater:function(C){this.$element.data("value",C.value);return C.text},typeaheadRender:function(D){var C=this;D=B(D).map(function(E,F){E=B(C.options.item).data("item",F);E.find("a").html(C.highlighter(F));return E[0]});if(this.options.autoSelect){D.first().addClass("active")}this.$menu.html(D);return this},typeaheadSelect:function(){var C=this.$menu.find(".active").data("item");if(this.options.autoSelect||C){this.$element.val(this.updater(C)).change()}return this.hide()},typeaheadMove:function(C){if(!this.shown){return}switch(C.keyCode){case 9:case 13:case 27:if(!this.$menu.find(".active").length){return}C.preventDefault();break;case 38:C.preventDefault();this.prev();break;case 40:C.preventDefault();this.next();break}C.stopPropagation()}});A.defaults=B.extend({},B.fn.editabletypes.list.defaults,{tpl:'<input type="text">',typeahead:null,clear:true});B.fn.editabletypes.typeahead=A}(window.jQuery));