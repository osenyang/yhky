(function(A,D){var B=A.document,C;var E=function(O,M,P){var Q=this,I,K,L,S,J,N,R={"updated":[]};this.listContainer=(typeof(O)=="string")?B.getElementById(O):O;if(!this.listContainer){return}this.items=[];this.visibleItems=[];this.matchingItems=[];this.searched=false;this.filtered=false;this.list=null;this.templateEngines={};this.page=M.page||200;this.i=M.i||1;K={start:function(U,T){T.plugins=T.plugins||{};this.classes(T);I=new J(Q,T);this.callbacks(T);this.items.start(U,T);Q.update();this.plugins(T.plugins)},classes:function(T){T.listClass=T.listClass||"list";T.searchClass=T.searchClass||"search";T.sortClass=T.sortClass||"sort"},callbacks:function(T){Q.list=C.getByClass(T.listClass,Q.listContainer,true);C.addEvent(C.getByClass(T.searchClass,Q.listContainer),"keyup",Q.search);N=C.getByClass(T.sortClass,Q.listContainer);C.addEvent(N,"click",Q.sort)},items:{start:function(W,V){if(V.valueNames){var T=this.get(),U=V.valueNames;if(V.indexAsync){this.indexAsync(T,U)}else{this.index(T,U)}}if(W!==D){Q.add(W)}},get:function(){var U=Q.list.childNodes,V=[];for(var T=0,W=U.length;T<W;T++){if(U[T].data===D){V.push(U[T])}}return V},index:function(V,U){for(var T=0,W=V.length;T<W;T++){Q.items.push(new S(U,V[T]))}},indexAsync:function(V,U){var T=V.splice(0,100);this.index(T,U);if(V.length>0){setTimeout(function(){K.items.indexAsync(V,U)},10)}else{Q.update()}}},plugins:function(U){var W={templater:I,init:K,initialItems:L,Item:S,Templater:J,sortButtons:N,events:R,reset:G};for(var T=0;T<U.length;T++){U[T][1]=U[T][1]||{};var V=U[T][1].name||U[T][0];Q[V]=Q.plugins[U[T][0]].call(Q,W,U[T][1])}}};this.add=function(X,T){if(T){H(X,T)}var Y=[],V=false;if(X[0]===D){X=[X]}for(var U=0,Z=X.length;U<Z;U++){var W=null;if(X[U] instanceof S){W=X[U];W.reload()}else{V=(Q.items.length>Q.page)?true:false;W=new S(X[U],D,V)}Q.items.push(W);Y.push(W)}Q.update();return Y};var H=function(W,T,V){var U=W.splice(0,100);V=V||[];V=V.concat(Q.add(U));if(W.length>0){setTimeout(function(){H(W,T,V)},10)}else{Q.update();T(V)}};this.show=function(T,U){this.i=T;this.page=U;Q.update()};this.remove=function(T,W,V){var X=0;for(var U=0,Y=Q.items.length;U<Y;U++){if(Q.items[U].values()[T]==W){I.remove(Q.items[U],V);Q.items.splice(U,1);Y--;X++}}Q.update();return X};this.get=function(T,X){var V=[];for(var U=0,Y=Q.items.length;U<Y;U++){var W=Q.items[U];if(W.values()[T]==X){V.push(W)}}if(V.length==0){return null}else{if(V.length==1){return V[0]}else{return V}}};this.sort=function(T,a){var W=Q.items.length,X=null,c=T.target||T.srcElement,U="",b=false,V="asc",Z="desc",a=a||{};if(c===D){X=T;b=a.asc||false}else{X=C.getAttribute(c,"data-sort");b=C.hasClass(c,V)?false:true}for(var Y=0,d=N.length;Y<d;Y++){C.removeClass(N[Y],V);C.removeClass(N[Y],Z)}if(b){if(c!==D){C.addClass(c,V)}b=true}else{if(c!==D){C.addClass(c,Z)}b=false}if(a.sortFunction){a.sortFunction=a.sortFunction}else{a.sortFunction=function(f,e){return C.sorter.alphanum(f.values()[X].toLowerCase(),e.values()[X].toLowerCase(),b)}}Q.items.sort(a.sortFunction);Q.update()};this.search=function(T,V){Q.i=1;var b=[],Z,e,a,c,d,V=(V===D)?Q.items[0].values():V,T=(T===D)?"":T,Y=T.target||T.srcElement;T=(Y===D)?(""+T).toLowerCase():""+Y.value.toLowerCase();d=Q.items;T=T.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");I.clear();if(T===""){G.search();Q.searched=false;Q.update()}else{Q.searched=true;for(var X=0,U=d.length;X<U;X++){Z=false;e=d[X];c=e.values();for(var W in V){if(c.hasOwnProperty(W)&&V[W]!==null){a=(c[W]!=null)?c[W].toString().toLowerCase():"";if((T!=="")&&(a.search(T)>-1)){Z=true}}}if(Z){e.found=true;b.push(e)}else{e.found=false}}Q.update()}return Q.visibleItems};this.filter=function(X){Q.i=1;G.filter();if(X===D){Q.filtered=false}else{Q.filtered=true;var T=Q.items;for(var U=0,V=T.length;U<V;U++){var W=T[U];if(X(W)){W.filtered=true}else{W.filtered=false}}}Q.update();return Q.visibleItems};this.size=function(){return Q.items.length};this.clear=function(){I.clear();Q.items=[]};this.on=function(U,T){R[U].push(T)};var F=function(U){var T=R[U].length;while(T--){R[U][T]()}};var G={filter:function(){var T=Q.items,U=T.length;while(U--){T[U].filtered=false}},search:function(){var T=Q.items,U=T.length;while(U--){T[U].found=false}}};this.update=function(){var T=Q.items,V=T.length;Q.visibleItems=[];Q.matchingItems=[];I.clear();for(var U=0;U<V;U++){if(T[U].matching()&&((Q.matchingItems.length+1)>=Q.i&&Q.visibleItems.length<Q.page)){T[U].show();Q.visibleItems.push(T[U]);Q.matchingItems.push(T[U])}else{if(T[U].matching()){Q.matchingItems.push(T[U]);T[U].hide()}else{T[U].hide()}}}F("updated")};S=function(U,X,T){var W=this,V={};this.found=false;this.filtered=false;var Y=function(a,c,Z){if(c===D){if(Z){W.values(a,Z)}else{W.values(a)}}else{W.elm=c;var b=I.get(W,a);W.values(b)}};this.values=function(b,Z){if(b!==D){for(var a in b){V[a]=b[a]}if(Z!==true){I.set(W,W.values())}}else{return V}};this.show=function(){I.show(W)};this.hide=function(){I.hide(W)};this.matching=function(){return((Q.filtered&&Q.searched&&W.found&&W.filtered)||(Q.filtered&&!Q.searched&&W.filtered)||(!Q.filtered&&Q.searched&&W.found)||(!Q.filtered&&!Q.searched))};this.visible=function(){return(W.elm.parentNode)?true:false};Y(U,X,T)};J=function(U,T){if(T.engine===D){T.engine="standard"}else{T.engine=T.engine.toLowerCase()}return new Q.constructor.prototype.templateEngines[T.engine](U,T)};K.start(P,M)};E.prototype.templateEngines={};E.prototype.plugins={};E.prototype.templateEngines.standard=function(J,G){var I=C.getByClass(G.listClass,J.listContainer,true),H=L(G.item),K=this;function L(O){if(O===D){var P=I.childNodes,Q=[];for(var M=0,R=P.length;M<R;M++){if(P[M].data===D){return P[M]}}return null}else{if(O.indexOf("<")!==-1){var N=B.createElement("div");N.innerHTML=O;return N.firstChild}else{return B.getElementById(G.item)}}}var F={created:function(M){if(M.elm===D){K.create(M)}}};this.get=function(P,O){F.created(P);var Q={};for(var M=0,R=O.length;M<R;M++){var N=C.getByClass(O[M],P.elm,true);Q[O[M]]=N?N.innerHTML:""}return Q};this.set=function(N,P){F.created(N);for(var O in P){if(P.hasOwnProperty(O)){var M=C.getByClass(O,N.elm,true);if(M){M.innerHTML=P[O]}}}};this.create=function(N){if(N.elm!==D){return}var M=H.cloneNode(true);M.id="";N.elm=M;K.set(N,N.values())};this.remove=function(M){I.removeChild(M.elm)};this.show=function(M){F.created(M);I.appendChild(M.elm)};this.hide=function(M){if(M.elm!==D&&M.elm.parentNode===I){I.removeChild(M.elm)}};this.clear=function(){if(I.hasChildNodes()){while(I.childNodes.length>=1){I.removeChild(I.firstChild)}}}};C={getByClass:(function(){if(B.getElementsByClassName){return function(H,F,G){if(G){return F.getElementsByClassName(H)[0]}else{return F.getElementsByClassName(H)}}}else{return function(H,L,O){var G=[],N="*";if(L==null){L=B}var I=L.getElementsByTagName(N);var F=I.length;var J=new RegExp("(^|\\s)"+H+"(\\s|$)");for(var K=0,M=0;K<F;K++){if(J.test(I[K].className)){if(O){return I[K]}else{G[M]=I[K];M++}}}return G}}})(),addEvent:(function(F,G){if(G.addEventListener){return function(J,H,L){if((J&&!(J instanceof Array)&&!J.length&&!C.isNodeList(J)&&(J.length!==0))||J===F){J.addEventListener(H,L,false)}else{if(J&&J[0]!==D){var K=J.length;for(var I=0;I<K;I++){C.addEvent(J[I],H,L)}}}}}else{if(G.attachEvent){return function(J,H,L){if((J&&!(J instanceof Array)&&!J.length&&!C.isNodeList(J)&&(J.length!==0))||J===F){J.attachEvent("on"+H,function(){return L.call(J,F.event)})}else{if(J&&J[0]!==D){var K=J.length;for(var I=0;I<K;I++){C.addEvent(J[I],H,L)}}}}}}})(this,B),getAttribute:function(K,I){var H=(K.getAttribute&&K.getAttribute(I))||null;if(!H){var J=K.attributes;var F=J.length;for(var G=0;G<F;G++){if(I[G]!==D){if(I[G].nodeName===I){H=I[G].nodeValue}}}}return H},isNodeList:function(G){var F=Object.prototype.toString.call(G);if(typeof G==="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(F)&&(G.length==0||(typeof G[0]==="object"&&G[0].nodeType>0))){return true}return false},hasClass:function(H,F){var G=this.getAttribute(H,"class")||this.getAttribute(H,"className")||"";return(G.search(F)>-1)},addClass:function(H,F){if(!this.hasClass(H,F)){var G=this.getAttribute(H,"class")||this.getAttribute(H,"className")||"";G=G+" "+F+" ";G=G.replace(/\s{2,}/g," ");H.setAttribute("class",G)}},removeClass:function(H,F){if(this.hasClass(H,F)){var G=this.getAttribute(H,"class")||this.getAttribute(H,"className")||"";G=G.replace(F,"");H.setAttribute("class",G)}},sorter:{alphanum:function(K,I,G){if(K===D||K===null){K=""}if(I===D||I===null){I=""}K=K.toString().replace(/&(lt|gt);/g,function(N,O){return(O=="lt")?"<":">"});K=K.replace(/<\/?[^>]+(>|$)/g,"");I=I.toString().replace(/&(lt|gt);/g,function(N,O){return(O=="lt")?"<":">"});I=I.replace(/<\/?[^>]+(>|$)/g,"");var F=this.chunkify(K);var H=this.chunkify(I);for(var J=0;F[J]&&H[J];J++){if(F[J]!==H[J]){var L=Number(F[J]),M=Number(H[J]);if(G){if(L==F[J]&&M==H[J]){return L-M}else{return(F[J]>H[J])?1:-1}}else{if(L==F[J]&&M==H[J]){return M-L}else{return(F[J]>H[J])?-1:1}}}}return F.length-H.length},chunkify:function(F){var M=[],K=0,L=-1,I=0,H,G;while(H=(G=F.charAt(K++)).charCodeAt(0)){var J=(H==45||H==46||(H>=48&&H<=57));if(J!==I){M[++L]="";I=J}M[L]+=G}return M}}};A.List=E;A.ListJsHelpers=C})(window);