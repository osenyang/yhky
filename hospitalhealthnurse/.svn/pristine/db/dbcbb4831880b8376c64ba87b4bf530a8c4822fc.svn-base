(function(A){if(typeof A.fn.each2=="undefined"){A.fn.extend({each2:function(D){var E=A([0]),B=-1,C=this.length;while(++B<C&&(E.context=E[0]=this[B])&&D.call(E[0],B,E)!==false){}return this}})}})(jQuery);(function(S,Q){if(window.Select2!==Q){return}var U,b,V,A,Y,N,L,Z,f,U={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(l){l=l.which?l.which:l;switch(l){case U.LEFT:case U.RIGHT:case U.UP:case U.DOWN:return true}return false},isControl:function(l){var m=l.which;switch(m){case U.SHIFT:case U.CTRL:case U.ALT:return true}if(l.metaKey){return true}return false},isFunctionKey:function(l){l=l.which?l.which:l;return l>=112&&l<=123}},M="<div class='select2-measure-scrollbar'></div>";Z=S(document);Y=(function(){var l=1;return function(){return l++}}());function X(p,m){var n=0,o=m.length;for(;n<o;n=n+1){if(a(p,m[n])){return n}}return -1}function G(){var m=S(M);m.appendTo("body");var l={width:m.width()-m[0].clientWidth,height:m.height()-m[0].clientHeight};m.remove();return l}function a(m,l){if(m===l){return true}if(m===Q||l===Q){return false}if(m===null||l===null){return false}if(m.constructor===String){return m+""===l+""}if(l.constructor===String){return l+""===m+""}return false}function e(p,m){var q,n,o;if(p===null||p.length<1){return[]}q=p.split(m);for(n=0,o=q.length;n<o;n=n+1){q[n]=S.trim(q[n])}return q}function c(l){return l.outerWidth(false)-l.width()}function g(m){var l="keyup-change-value";m.on("keydown",function(){if(S.data(m,l)===Q){S.data(m,l,m.val())}});m.on("keyup",function(){var n=S.data(m,l);if(n!==Q&&m.val()!==n){S.removeData(m,l);m.trigger("keyup-change")}})}Z.on("mousemove",function(l){L={x:l.pageX,y:l.pageY}});function j(l){l.on("mousemove",function(m){var n=L;if(n===Q||n.x!==m.pageX||n.y!==m.pageY){S(m.target).trigger("mousemove-filtered",m)}})}function P(m,o,n){n=n||Q;var l;return function(){var p=arguments;window.clearTimeout(l);l=window.setTimeout(function(){o.apply(n,p)},m)}}function W(n){var m=false,l;return function(){if(m===false){l=n();m=true}return l}}function K(m,n){var l=P(m,function(o){n.trigger("scroll-debounced",o)});n.on("scroll",function(o){if(X(o.target,n.get())>=0){l(o)}})}function D(l){if(l[0]===document.activeElement){return}window.setTimeout(function(){var m=l[0],n=l.val().length,o;l.focus();if(l.is(":visible")&&m===document.activeElement){if(m.setSelectionRange){m.setSelectionRange(n,n)}else{if(m.createTextRange){o=m.createTextRange();o.collapse(false);o.select()}}}},0)}function E(l){l=S(l)[0];var m=0;var n=0;if("selectionStart" in l){m=l.selectionStart;n=l.selectionEnd-m}else{if("selection" in document){l.focus();var o=document.selection.createRange();n=document.selection.createRange().text.length;o.moveStart("character",-l.value.length);m=o.text.length-n}}return{offset:m,length:n}}function F(l){l.preventDefault();l.stopPropagation()}function d(l){l.preventDefault();l.stopImmediatePropagation()}function J(l){if(!N){var m=l[0].currentStyle||window.getComputedStyle(l[0],null);N=S(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:m.fontSize,fontFamily:m.fontFamily,fontStyle:m.fontStyle,fontWeight:m.fontWeight,letterSpacing:m.letterSpacing,textTransform:m.textTransform,whiteSpace:"nowrap"});N.attr("class","select2-sizer");S("body").append(N)}N.text(l.val());return N.width()}function k(m,p,q){var n,l=[],o;n=m.attr("class");if(n){n=""+n;S(n.split(" ")).each2(function(){if(this.indexOf("select2-")===0){l.push(this)}})}n=p.attr("class");if(n){n=""+n;S(n.split(" ")).each2(function(){if(this.indexOf("select2-")!==0){o=q(this);if(o){l.push(this)}}})}m.attr("class",l.join(" "))}function B(n,o,q,l){var m=n.toUpperCase().indexOf(o.toUpperCase()),p=o.length;if(m<0){q.push(l(n));return}q.push(l(n.substring(0,m)));q.push("<span class='select2-match'>");q.push(l(n.substring(m,m+p)));q.push("</span>");q.push(l(n.substring(m+p,n.length)))}function I(p){var l,r=0,o=null,q=p.quietMillis||100,n=p.url,m=this;return function(s){window.clearTimeout(l);l=window.setTimeout(function(){r+=1;var t=r,y=p.data,u=n,v=p.transport||S.fn.select2.ajaxDefaults.transport,w={type:p.type||"GET",cache:p.cache||false,jsonpCallback:p.jsonpCallback||Q,dataType:p.dataType||"json"},x=S.extend({},S.fn.select2.ajaxDefaults.params,w);y=y?y.call(m,s.term,s.page,s.context):null;u=(typeof u==="function")?u.call(m,s.term,s.page,s.context):u;if(null!==o){o.abort()}if(p.params){if(S.isFunction(p.params)){S.extend(x,p.params.call(m))}else{S.extend(x,p.params)}}S.extend(x,{url:u,dataType:p.dataType,data:y,success:function(Aa){if(t<r){return}var z=p.results(Aa,s.page);s.callback(z)}});o=v.call(m,x)},q)}}function i(o){var q=o,m,l,p=function(r){return""+r.text};if(S.isArray(q)){l=q;q={results:l}}if(S.isFunction(q)===false){l=q;q=function(){return l}}var n=q();if(n.text){p=n.text;if(!S.isFunction(p)){m=n.text;p=function(r){return r[m]}}}return function(r){var s=r.term,v={results:[]},u;if(s===""){r.callback(q());return}u=function(y,w){var t,x;y=y[0];if(y.children){t={};for(x in y){if(y.hasOwnProperty(x)){t[x]=y[x]}}t.children=[];S(y.children).each2(function(z,Aa){u(Aa,t.children)});if(t.children.length||r.matcher(s,p(t),y)){w.push(t)}}else{if(r.matcher(s,p(y),y)){w.push(y)}}};S(q().results).each2(function(t,w){u(w,v.results)});r.callback(v)}}function C(m){var l=S.isFunction(m);return function(n){var o=n.term,p={results:[]};S(l?m():m).each(function(){var r=this.text!==Q,q=r?this.text:this;if(o===""||n.matcher(o,q)){p.results.push(r?this:{id:this,text:this})}});n.callback(p)}}function H(l,m){if(S.isFunction(l)){return true}if(!l){return false}throw new Error("formatterName must be a function or a falsy value")}function R(l){return S.isFunction(l)?l():l}function T(m){var l=0;S.each(m,function(n,o){if(o.children){l+=T(o.children)}else{l++}});return l}function h(u,s,t,r){var m=u,n=false,w,o,q,v,p;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1){return Q}while(true){o=-1;for(q=0,v=r.tokenSeparators.length;q<v;q++){p=r.tokenSeparators[q];o=u.indexOf(p);if(o>=0){break}}if(o<0){break}w=u.substring(0,o);u=u.substring(o+p.length);if(w.length>0){w=r.createSearchChoice(w,s);if(w!==Q&&w!==null&&r.id(w)!==Q&&r.id(w)!==null){n=false;for(q=0,v=s.length;q<v;q++){if(a(r.id(w),r.id(s[q]))){n=true;break}}if(!n){t(w)}}}}if(m!==u){return u}}function O(l,n){var m=function(){};m.prototype=new l;m.prototype.constructor=m;m.prototype.parent=l.prototype;m.prototype=S.extend(m.prototype,n);return m}b=O(Object,{bind:function(l){var m=this;return function(){l.apply(m,arguments)}},init:function(m){var o,p,n=".select2-results",l,q;this.opts=m=this.prepareOpts(m);this.id=m.id;if(m.element.data("select2")!==Q&&m.element.data("select2")!==null){this.destroy()}this.container=this.createContainer();this.containerId="s2id_"+(m.element.attr("id")||"autogen"+Y());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.body=W(function(){return m.element.closest("body")});k(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.css(R(m.containerCss));this.container.addClass(R(m.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(R(m.dropdownCssClass));this.dropdown.data("select2",this);this.results=o=this.container.find(n);this.search=p=this.container.find("input.select2-input");this.resultsPage=0;this.context=null;this.initContainer();j(this.results);this.dropdown.on("mousemove-filtered touchstart touchmove touchend",n,this.bind(this.highlightUnderEvent));K(80,this.results);this.dropdown.on("scroll-debounced",n,this.bind(this.loadMoreIfNeeded));S(this.container).on("change",".select2-input",function(r){r.stopPropagation()});S(this.dropdown).on("change",".select2-input",function(r){r.stopPropagation()});if(S.fn.mousewheel){o.mousewheel(function(t,r,w,v){var u=o.scrollTop(),s;if(v>0&&u-v<=0){o.scrollTop(0);F(t)}else{if(v<0&&o.get(0).scrollHeight-o.scrollTop()+v<=o.height()){o.scrollTop(o.get(0).scrollHeight-o.height());F(t)}}})}g(p);p.on("keyup-change input paste",this.bind(this.updateResults));p.on("focus",function(){p.addClass("select2-focused")});p.on("blur",function(){p.removeClass("select2-focused")});this.dropdown.on("mouseup",n,this.bind(function(r){if(S(r.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent(r);this.selectHighlighted(r)}}));this.dropdown.on("click mouseup mousedown",function(r){r.stopPropagation()});if(S.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(m.maximumInputLength!==null){this.search.attr("maxlength",m.maximumInputLength)}var l=m.element.prop("disabled");if(l===Q){l=false}this.enable(!l);var q=m.element.prop("readonly");if(q===Q){q=false}this.readonly(q);f=f||G();this.autofocus=m.element.prop("autofocus");m.element.prop("autofocus",false);if(this.autofocus){this.focus()}},destroy:function(){var l=this.opts.element.data("select2");if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}if(l!==Q){l.container.remove();l.dropdown.remove();l.opts.element.removeClass("select2-offscreen").removeData("select2").off(".select2").attr({"tabindex":this.elementTabIndex}).prop("autofocus",this.autofocus||false).show()}},optionToData:function(l){if(l.is("option")){return{id:l.prop("value"),text:l.text(),element:l.get(),css:l.attr("class"),disabled:l.prop("disabled"),locked:a(l.attr("locked"),"locked")}}else{if(l.is("optgroup")){return{text:l.attr("label"),children:[],element:l.get(),css:l.attr("class")}}}},prepareOpts:function(m){var p,o,l,n,q=this;p=m.element;if(p.get(0).tagName.toLowerCase()==="select"){this.select=o=m.element}if(o){S.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in m){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}})}m=S.extend({},{populateResults:function(x,w,v){var s,t,r,u,y=this.opts.id;s=function(Ah,Ak,z){var Ag,Aj,Aa,Ab,Af,Ae,Ai,Ad,Ac,Al;Ah=m.sortResults(Ah,Ak,v);for(Ag=0,Aj=Ah.length;Ag<Aj;Ag=Ag+1){Aa=Ah[Ag];Af=(Aa.disabled===true);Ab=(!Af)&&(y(Aa)!==Q);Ae=Aa.children&&Aa.children.length>0;Ai=S("<li></li>");Ai.addClass("select2-results-dept-"+z);Ai.addClass("select2-result");Ai.addClass(Ab?"select2-result-selectable":"select2-result-unselectable");if(Af){Ai.addClass("select2-disabled")}if(Ae){Ai.addClass("select2-result-with-children")}Ai.addClass(q.opts.formatResultCssClass(Aa));Ad=S(document.createElement("div"));Ad.addClass("select2-result-label");Al=m.formatResult(Aa,Ad,v,q.opts.escapeMarkup);if(Al!==Q){Ad.html(Al)}Ai.append(Ad);if(Ae){Ac=S("<ul></ul>");Ac.addClass("select2-result-sub");s(Aa.children,Ac,z+1);Ai.append(Ac)}Ai.data("select2-data",Aa);Ak.append(Ai)}};s(w,x,0)}},S.fn.select2.defaults,m);if(typeof(m.id)!=="function"){l=m.id;m.id=function(r){return r[l]}}if(S.isArray(m.element.data("select2Tags"))){if("tags" in m){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+m.element.attr("id")}m.tags=m.element.data("select2Tags")}if(o){m.query=this.bind(function(s){var w={results:[],more:false},t=s.term,r,u,v;v=function(z,y){var x;if(z.is("option")){if(s.matcher(t,z.text(),z)){y.push(q.optionToData(z))}}else{if(z.is("optgroup")){x=q.optionToData(z);z.children().each2(function(Aa,Ab){v(Ab,x.children)});if(x.children.length>0){y.push(x)}}}};r=p.children();if(this.getPlaceholder()!==Q&&r.length>0){u=r[0];if(S(u).text()===""){r=r.not(u)}}r.each2(function(x,y){v(y,w.results)});s.callback(w)});m.id=function(r){return r.id};m.formatResultCssClass=function(r){return r.css}}else{if(!("query" in m)){if("ajax" in m){n=m.element.data("ajax-url");if(n&&n.length>0){m.ajax.url=n}m.query=I.call(m.element,m.ajax)}else{if("data" in m){m.query=i(m.data)}else{if("tags" in m){m.query=C(m.tags);if(m.createSearchChoice===Q){m.createSearchChoice=function(r){return{id:r,text:r}}}if(m.initSelection===Q){m.initSelection=function(s,r){var t=[];S(e(s.val(),m.separator)).each(function(){var w=this,v=this,u=m.tags;if(S.isFunction(u)){u=u()}S(u).each(function(){if(a(this.id,w)){v=this.text;return false}});t.push({id:w,text:v})});r(t)}}}}}}}if(typeof(m.query)!=="function"){throw"query function not defined for Select2 "+m.element.attr("id")}return m},monitorSource:function(){var l=this.opts.element,m;l.on("change.select2",this.bind(function(n){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection()}}));m=this.bind(function(){var q,o,n=this;var p=l.prop("disabled");if(p===Q){p=false}this.enable(!p);var o=l.prop("readonly");if(o===Q){o=false}this.readonly(o);k(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(R(this.opts.containerCssClass));k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(R(this.opts.dropdownCssClass))});l.on("propertychange.select2 DOMAttrModified.select2",m);if(this.mutationCallback===Q){this.mutationCallback=function(n){n.forEach(m)}}if(typeof WebKitMutationObserver!=="undefined"){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}this.propertyObserver=new WebKitMutationObserver(this.mutationCallback);this.propertyObserver.observe(l.get(0),{attributes:true,subtree:false})}},triggerSelect:function(m){var l=S.Event("select2-selecting",{val:this.id(m),object:m});this.opts.element.trigger(l);return !l.isDefaultPrevented()},triggerChange:function(l){l=l||{};l=S.extend({},l,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(l);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange){this.opts.element.blur()}},isInterfaceEnabled:function(){return this.enabledInterface===true},enableInterface:function(){var m=this._enabled&&!this._readonly,l=!m;if(m===this.enabledInterface){return false}this.container.toggleClass("select2-container-disabled",l);this.close();this.enabledInterface=m;return true},enable:function(l){if(l===Q){l=true}if(this._enabled===l){return false}this._enabled=l;this.opts.element.prop("disabled",!l);this.enableInterface();return true},readonly:function(l){if(l===Q){l=false}if(this._readonly===l){return false}this._readonly=l;this.opts.element.prop("readonly",l);this.enableInterface();return true},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var s=this.dropdown,y=this.container.offset(),Aa=this.container.outerHeight(false),u=this.container.outerWidth(false),Ab=s.outerHeight(false),x=S(window).scrollLeft()+S(window).width(),n=S(window).scrollTop()+S(window).height(),m=y.top+Aa,l=y.left,Ac=m+Ab<=n,v=(y.top-Ab)>=this.body().scrollTop(),z=s.outerWidth(false),q=l+z<=x,r=s.hasClass("select2-drop-above"),t,o,w,p;if(this.opts.dropdownAutoWidth){p=S(".select2-results",s)[0];s.addClass("select2-drop-auto-width");s.css("width","");z=s.outerWidth(false)+(p.scrollHeight===p.clientHeight?0:f.width);z>u?u=z:z=u;q=l+z<=x}else{this.container.removeClass("select2-drop-auto-width")}if(this.body().css("position")!=="static"){t=this.body().offset();m-=t.top;l-=t.left}if(r){o=true;if(!v&&Ac){o=false}}else{o=false;if(!Ac&&v){o=true}}if(!q){l=y.left+u-z}if(o){m=y.top-Ab;this.container.addClass("select2-drop-above");s.addClass("select2-drop-above")}else{this.container.removeClass("select2-drop-above");s.removeClass("select2-drop-above")}w=S.extend({top:m,left:l,width:u},R(this.opts.dropdownCss));s.css(w)},shouldOpen:function(){var l;if(this.opened()){return false}if(this._enabled===false||this._readonly===true){return false}l=S.Event("select2-opening");this.opts.element.trigger(l);return !l.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen()){return false}this.opening();return true},opening:function(){var o=this.containerId,p="scroll."+o,n="resize."+o,q="orientationchange."+o,r;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();if(this.dropdown[0]!==this.body().children().last()[0]){this.dropdown.detach().appendTo(this.body())}r=S("#select2-drop-mask");if(r.length==0){r=S(document.createElement("div"));r.attr("id","select2-drop-mask").attr("class","select2-drop-mask");r.hide();r.appendTo(this.body());r.on("mousedown touchstart",function(t){var s=S("#select2-drop"),u;if(s.length>0){u=s.data("select2");if(u.opts.selectOnBlur){u.selectHighlighted({noFocus:true})}u.close();t.preventDefault();t.stopPropagation()}})}if(this.dropdown.prev()[0]!==r[0]){this.dropdown.before(r)}S("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");r.css(l());r.show();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();var m=this;this.container.parents().add(window).each(function(){S(this).on(n+" "+p+" "+q,function(s){S("#select2-drop-mask").css(l());m.positionDropdown()})});function l(){return{width:Math.max(document.documentElement.scrollWidth,S(window).width()),height:Math.max(document.documentElement.scrollHeight,S(window).height())}}},close:function(){if(!this.opened()){return}var m=this.containerId,n="scroll."+m,l="resize."+m,o="orientationchange."+m;this.container.parents().add(window).each(function(){S(this).off(n).off(l).off(o)});this.clearDropdownAlignmentPreference();S("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(S.Event("select2-close"))},clearSearch:function(){},getMaximumSelectionSize:function(){return R(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var p=this.results,n,m,q,s,o,r,l;m=this.highlight();if(m<0){return}if(m==0){p.scrollTop(0);return}n=this.findHighlightableChoices().find(".select2-result-label");q=S(n[m]);s=q.offset().top+q.outerHeight(true);if(m===n.length-1){l=p.find("li.select2-more-results");if(l.length>0){s=l.offset().top+l.outerHeight(true)}}o=p.offset().top+p.outerHeight(true);if(s>o){p.scrollTop(p.scrollTop()+(s-o))}r=q.offset().top-p.offset().top;if(r<0&&q.css("display")!="none"){p.scrollTop(p.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(l){var n=this.findHighlightableChoices(),o=this.highlight();while(o>-1&&o<n.length){o+=l;var m=S(n[o]);if(m.hasClass("select2-result-selectable")&&!m.hasClass("select2-disabled")&&!m.hasClass("select2-selected")){this.highlight(o);break}}},highlight:function(n){var m=this.findHighlightableChoices(),l,o;if(arguments.length===0){return X(m.filter(".select2-highlighted")[0],m.get())}if(n>=m.length){n=m.length-1}if(n<0){n=0}this.results.find(".select2-highlighted").removeClass("select2-highlighted");l=S(m[n]);l.addClass("select2-highlighted");this.ensureHighlightVisible();o=l.data("select2-data");if(o){this.opts.element.trigger({type:"select2-highlight",val:this.id(o),choice:o})}},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(n){var l=S(n.target).closest(".select2-result-selectable");if(l.length>0&&!l.is(".select2-highlighted")){var m=this.findHighlightableChoices();this.highlight(m.index(l))}else{if(l.length==0){this.results.find(".select2-highlighted").removeClass("select2-highlighted")}}},loadMoreIfNeeded:function(){var q=this.results,l=q.find("li.select2-more-results"),r,m=-1,n=this.resultsPage+1,s=this,p=this.search.val(),o=this.context;if(l.length===0){return}r=l.offset().top-q.offset().top-q.height();if(r<=this.opts.loadMorePadding){l.addClass("select2-active");this.opts.query({element:this.opts.element,term:p,page:n,context:o,matcher:this.opts.matcher,callback:this.bind(function(t){if(!s.opened()){return}s.opts.populateResults.call(this,q,t.results,{term:p,page:n,context:o});s.postprocessResults(t,false,false);if(t.more===true){l.detach().appendTo(q).text(s.opts.formatLoadMore(n+1));window.setTimeout(function(){s.loadMoreIfNeeded()},10)}else{l.remove()}s.positionDropdown();s.resultsPage=n;s.context=t.context})})}},tokenize:function(){},updateResults:function(v){var o=this.search,s=this.results,t=this.opts,n,u=this,r,q=o.val(),m=S.data(this.container,"select2-last-term");if(v!==true&&m&&a(q,m)){return}S.data(this.container,"select2-last-term",q);if(v!==true&&(this.showSearchInput===false||!this.opened())){return}function w(){s.scrollTop(0);o.removeClass("select2-active");u.positionDropdown()}function l(x){s.html(x);w()}var p=this.getMaximumSelectionSize();if(p>=1){n=this.data();if(S.isArray(n)&&n.length>=p&&H(t.formatSelectionTooBig,"formatSelectionTooBig")){l("<li class='select2-selection-limit'>"+t.formatSelectionTooBig(p)+"</li>");return}}if(o.val().length<t.minimumInputLength){if(H(t.formatInputTooShort,"formatInputTooShort")){l("<li class='select2-no-results'>"+t.formatInputTooShort(o.val(),t.minimumInputLength)+"</li>")}else{l("")}if(v){this.showSearch(true)}return}if(t.maximumInputLength&&o.val().length>t.maximumInputLength){if(H(t.formatInputTooLong,"formatInputTooLong")){l("<li class='select2-no-results'>"+t.formatInputTooLong(o.val(),t.maximumInputLength)+"</li>")}else{l("")}return}if(t.formatSearching&&this.findHighlightableChoices().length===0){l("<li class='select2-searching'>"+t.formatSearching()+"</li>")}o.addClass("select2-active");r=this.tokenize();if(r!=Q&&r!=null){o.val(r)}this.resultsPage=1;t.query({element:t.element,term:o.val(),page:this.resultsPage,context:null,matcher:t.matcher,callback:this.bind(function(y){var x;if(!this.opened()){this.search.removeClass("select2-active");return}this.context=(y.context===Q)?null:y.context;if(this.opts.createSearchChoice&&o.val()!==""){x=this.opts.createSearchChoice.call(null,o.val(),y.results);if(x!==Q&&x!==null&&u.id(x)!==Q&&u.id(x)!==null){if(S(y.results).filter(function(){return a(u.id(this),u.id(x))}).length===0){y.results.unshift(x)}}}if(y.results.length===0&&H(t.formatNoMatches,"formatNoMatches")){l("<li class='select2-no-results'>"+t.formatNoMatches(o.val())+"</li>");return}s.empty();u.opts.populateResults.call(this,s,y.results,{term:o.val(),page:this.resultsPage,context:null});if(y.more===true&&H(t.formatLoadMore,"formatLoadMore")){s.append("<li class='select2-more-results'>"+u.opts.escapeMarkup(t.formatLoadMore(this.resultsPage))+"</li>");window.setTimeout(function(){u.loadMoreIfNeeded()},10)}this.postprocessResults(y,v);w();this.opts.element.trigger({type:"select2-loaded",data:y})})})},cancel:function(){this.close()},blur:function(){if(this.opts.selectOnBlur){this.selectHighlighted({noFocus:true})}this.close();this.container.removeClass("select2-container-active");if(this.search[0]===document.activeElement){this.search.blur()}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){D(this.search)},selectHighlighted:function(m){var n=this.highlight(),l=this.results.find(".select2-highlighted"),o=l.closest(".select2-result").data("select2-data");if(o){this.highlight(n);this.onSelect(o,m)}},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function l(){var q,p,o,n,r;if(this.opts.width==="off"){return null}else{if(this.opts.width==="element"){return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}else{if(this.opts.width==="copy"||this.opts.width==="resolve"){q=this.opts.element.attr("style");if(q!==Q){p=q.split(";");for(n=0,r=p.length;n<r;n=n+1){o=p[n].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(o!==null&&o.length>=1){return o[1]}}}q=this.opts.element.css("width");if(q&&q.length>0){return q}if(this.opts.width==="resolve"){return(this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px")}return null}else{if(S.isFunction(this.opts.width)){return this.opts.width()}else{return this.opts.width}}}}}var m=l.call(this);if(m!==null){this.container.css("width",m)}}});V=O(b,{createContainer:function(){var l=S(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return l},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.focusser.prop("disabled",!this.isInterfaceEnabled())}},opening:function(){var l,m;this.parent.opening.apply(this,arguments);if(this.showSearchInput!==false){this.search.val(this.focusser.val())}this.search.focus();l=this.search.get(0);if(l.createTextRange){m=l.createTextRange();m.collapse(false);m.select()}this.focusser.prop("disabled",true).val("");this.updateResults(true);this.opts.element.trigger(S.Event("select2-open"))},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},focus:function(){if(this.opened()){this.close()}else{this.focusser.removeAttr("disabled");this.focusser.focus()}},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},initContainer:function(){var n,m=this.container,l=this.dropdown;this.showSearch(false);this.selection=n=m.find(".select2-choice");this.focusser=m.find(".select2-focusser");this.focusser.attr("id","s2id_autogen"+Y());S("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function(o){if(!this.isInterfaceEnabled()){return}if(o.which===U.PAGE_UP||o.which===U.PAGE_DOWN){F(o);return}switch(o.which){case U.UP:case U.DOWN:this.moveHighlight((o.which===U.UP)?-1:1);F(o);return;case U.ENTER:this.selectHighlighted();F(o);return;case U.TAB:this.selectHighlighted({noFocus:true});return;case U.ESC:this.cancel(o);F(o);return}}));this.search.on("blur",this.bind(function(o){if(document.activeElement===this.body().get(0)){window.setTimeout(this.bind(function(){this.search.focus()}),0)}}));this.focusser.on("keydown",this.bind(function(o){if(!this.isInterfaceEnabled()){return}if(o.which===U.TAB||U.isControl(o)||U.isFunctionKey(o)||o.which===U.ESC){return}if(this.opts.openOnEnter===false&&o.which===U.ENTER){F(o);return}if(o.which==U.DOWN||o.which==U.UP||(o.which==U.ENTER&&this.opts.openOnEnter)){this.open();F(o);return}if(o.which==U.DELETE||o.which==U.BACKSPACE){if(this.opts.allowClear){this.clear()}F(o);return}}));g(this.focusser);this.focusser.on("keyup-change input",this.bind(function(o){o.stopPropagation();if(this.opened()){return}this.open()}));n.on("mousedown","abbr",this.bind(function(o){if(!this.isInterfaceEnabled()){return}this.clear();d(o);this.close();this.selection.focus()}));n.on("mousedown",this.bind(function(o){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(S.Event("select2-focus"))}if(this.opened()){this.close()}else{if(this.isInterfaceEnabled()){this.open()}}F(o)}));l.on("mousedown",this.bind(function(){this.search.focus()}));n.on("focus",this.bind(function(o){F(o)}));this.focusser.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(S.Event("select2-focus"))}this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");this.opts.element.trigger(S.Event("select2-blur"))}}));this.search.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(S.Event("select2-focus"))}this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(l){var m=this.selection.data("select2-data");if(m){this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder();if(l!==false){this.opts.element.trigger({type:"select2-removed",val:this.id(m),choice:m});this.triggerChange({removed:m})}}},initSelection:function(){var m;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.setPlaceholder()}else{var l=this;this.opts.initSelection.call(null,this.opts.element,function(n){if(n!==Q&&n!==null){l.updateSelection(n);l.close();l.setPlaceholder()}})}},prepareOpts:function(){var l=this.parent.prepareOpts.apply(this,arguments),m=this;if(l.element.get(0).tagName.toLowerCase()==="select"){l.initSelection=function(o,n){var p=o.find(":selected");n(m.optionToData(p))}}else{if("data" in l){l.initSelection=l.initSelection||function(p,n){var q=p.val();var o=null;l.query({matcher:function(u,s,r){var t=a(q,l.id(r));if(t){o=r}return t},callback:!S.isFunction(n)?S.noop:function(){n(o)}})}}}return l},getPlaceholder:function(){if(this.select){if(this.select.find("option").first().text()!==""){return Q}}return this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var l=this.getPlaceholder();if(this.opts.element.val()===""&&l!==Q){if(this.select&&this.select.find("option:first").text()!==""){return}this.selection.find("span").html(this.opts.escapeMarkup(l));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},postprocessResults:function(r,o,n){var m=0,q=this,p=true;this.findHighlightableChoices().each2(function(s,t){if(a(q.id(t.data("select2-data")),q.opts.element.val())){m=s;return false}});if(n!==false){this.highlight(m)}if(o===true&&this.showSearchInput===false){var l=this.opts.minimumResultsForSearch;if(l>=0){this.showSearch(T(r.results)>=l)}}},showSearch:function(l){this.showSearchInput=l;this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!l);this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!l);S(this.dropdown,this.container).toggleClass("select2-with-searchbox",l)},onSelect:function(o,n){if(!this.triggerSelect(o)){return}var m=this.opts.element.val(),l=this.data();this.opts.element.val(this.id(o));this.updateSelection(o);this.opts.element.trigger({type:"select2-selected",val:this.id(o),choice:o});this.close();if(!n||!n.noFocus){this.selection.focus()}if(!a(m,this.id(o))){this.triggerChange({added:o,removed:l})}},updateSelection:function(n){var m=this.selection.find("span"),l;this.selection.data("select2-data",n);m.empty();l=this.opts.formatSelection(n,m);if(l!==Q){m.append(this.opts.escapeMarkup(l))}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==Q){this.container.addClass("select2-allowclear")}},val:function(){var o,l=false,p=null,m=this,n=this.data();if(arguments.length===0){return this.opts.element.val()}o=arguments[0];if(arguments.length>1){l=arguments[1]}if(this.select){this.select.val(o).find(":selected").each2(function(q,r){p=m.optionToData(r);return false});this.updateSelection(p);this.setPlaceholder();if(l){this.triggerChange({added:p,removed:n})}}else{if(this.opts.initSelection===Q){throw new Error("cannot call val() if initSelection() is not defined")}if(!o&&o!==0){this.clear(l);return}this.opts.element.val(o);this.opts.initSelection(this.opts.element,function(q){m.opts.element.val(!q?"":m.id(q));m.updateSelection(q);m.setPlaceholder();if(l){m.triggerChange({added:q,removed:n})}})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(m,l){var n;if(arguments.length===0){n=this.selection.data("select2-data");if(n==Q){n=null}return n}else{if(!m||m===""){this.clear(l)}else{n=this.data();this.opts.element.val(!m?"":this.id(m));this.updateSelection(m);if(l){this.triggerChange({added:m,removed:n})}}}}});A=O(b,{createContainer:function(){var l=S(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return l},prepareOpts:function(){var l=this.parent.prepareOpts.apply(this,arguments),m=this;if(l.element.get(0).tagName.toLowerCase()==="select"){l.initSelection=function(o,n){var p=[];o.find(":selected").each2(function(q,r){p.push(m.optionToData(r))});n(p)}}else{if("data" in l){l.initSelection=l.initSelection||function(q,n){var p=e(q.val(),l.separator);var o=[];l.query({matcher:function(u,s,r){var t=S.grep(p,function(v){return a(v,l.id(r))}).length;if(t){o.push(r)}return t},callback:!S.isFunction(n)?S.noop:function(){var t=[];for(var r=0;r<p.length;r++){var v=p[r];for(var u=0;u<o.length;u++){var s=o[u];if(a(v,l.id(s))){t.push(s);o.splice(u,1);break}}}n(t)}})}}}return l},selectChoice:function(l){var m=this.container.find(".select2-search-choice-focus");if(m.length&&l&&l[0]==m[0]){}else{if(m.length){this.opts.element.trigger("choice-deselected",m)}m.removeClass("select2-search-choice-focus");if(l&&l.length){this.close();l.addClass("select2-search-choice-focus");this.opts.element.trigger("choice-selected",l)}}},initContainer:function(){var m=".select2-choices",n;this.searchContainer=this.container.find(".select2-search-field");this.selection=n=this.container.find(m);var l=this;this.selection.on("mousedown",".select2-search-choice",function(o){l.search[0].focus();l.selectChoice(S(this))});this.search.attr("id","s2id_autogen"+Y());S("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id"));this.search.on("input paste",this.bind(function(){if(!this.isInterfaceEnabled()){return}if(!this.opened()){this.open()}}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(o){if(!this.isInterfaceEnabled()){return}++this.keydowns;var t=n.find(".select2-search-choice-focus");var s=t.prev(".select2-search-choice:not(.select2-locked)");var p=t.next(".select2-search-choice:not(.select2-locked)");var q=E(this.search);if(t.length&&(o.which==U.LEFT||o.which==U.RIGHT||o.which==U.BACKSPACE||o.which==U.DELETE||o.which==U.ENTER)){var r=t;if(o.which==U.LEFT&&s.length){r=s}else{if(o.which==U.RIGHT){r=p.length?p:null}else{if(o.which===U.BACKSPACE){this.unselect(t.first());this.search.width(10);r=s.length?s:p}else{if(o.which==U.DELETE){this.unselect(t.first());this.search.width(10);r=p.length?p:null}else{if(o.which==U.ENTER){r=null}}}}}this.selectChoice(r);F(o);if(!r||!r.length){this.open()}return}else{if(((o.which===U.BACKSPACE&&this.keydowns==1)||o.which==U.LEFT)&&(q.offset==0&&!q.length)){this.selectChoice(n.find(".select2-search-choice:not(.select2-locked)").last());F(o);return}else{this.selectChoice(null)}}if(this.opened()){switch(o.which){case U.UP:case U.DOWN:this.moveHighlight((o.which===U.UP)?-1:1);F(o);return;case U.ENTER:this.selectHighlighted();F(o);return;case U.TAB:this.selectHighlighted({noFocus:true});return;case U.ESC:this.cancel(o);F(o);return}}if(o.which===U.TAB||U.isControl(o)||U.isFunctionKey(o)||o.which===U.BACKSPACE||o.which===U.ESC){return}if(o.which===U.ENTER){if(this.opts.openOnEnter===false){return}else{if(o.altKey||o.ctrlKey||o.shiftKey||o.metaKey){return}}}this.open();if(o.which===U.PAGE_UP||o.which===U.PAGE_DOWN){F(o)}if(o.which===U.ENTER){F(o)}}));this.search.on("keyup",this.bind(function(o){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(o){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);if(!this.opened()){this.clearSearch()}o.stopImmediatePropagation();this.opts.element.trigger(S.Event("select2-blur"))}));this.container.on("mousedown",m,this.bind(function(o){if(!this.isInterfaceEnabled()){return}if(S(o.target).closest(".select2-search-choice").length>0){return}this.selectChoice(null);this.clearPlaceholder();if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(S.Event("select2-focus"))}this.open();this.focusSearch();o.preventDefault()}));this.container.on("focus",m,this.bind(function(){if(!this.isInterfaceEnabled()){return}if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(S.Event("select2-focus"))}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.search.prop("disabled",!this.isInterfaceEnabled())}},initSelection:function(){var m;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var l=this;this.opts.initSelection.call(null,this.opts.element,function(n){if(n!==Q&&n!==null){l.updateSelection(n);l.close();l.clearSearch()}})}},clearSearch:function(){var m=this.getPlaceholder(),l=this.getMaxSearchWidth();if(m!==Q&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(m).addClass("select2-default");this.search.width(l>0?l:this.container.css("width"))}else{this.search.val("").width(10)}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default")}},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(true);this.search.focus();this.opts.element.trigger(S.Event("select2-open"))},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(o){var n=[],l=[],m=this;S(o).each(function(){if(X(m.id(this),n)<0){n.push(m.id(this));l.push(this)}});o=l;this.selection.find(".select2-search-choice").remove();S(o).each(function(){m.addSelectedChoice(this)});m.postprocessResults()},tokenize:function(){var l=this.search.val();l=this.opts.tokenizer(l,this.data(),this.bind(this.onSelect),this.opts);if(l!=null&&l!=Q){this.search.val(l);if(l.length>0){this.open()}}},onSelect:function(m,l){if(!this.triggerSelect(m)){return}this.addSelectedChoice(m);this.opts.element.trigger({type:"selected",val:this.id(m),choice:m});if(this.select||!this.opts.closeOnSelect){this.postprocessResults()}if(this.opts.closeOnSelect){this.close();this.search.width(10)}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();if(this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()){this.updateResults(true)}this.positionDropdown()}else{this.close();this.search.width(10)}}this.triggerChange({added:m});if(!l||!l.noFocus){this.focusSearch()}},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(m){var n=!m.locked,r=S("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),o=S("<li class='select2-search-choice select2-locked'><div></div></li>");var l=n?r:o,q=this.id(m),p=this.getVal(),s;s=this.opts.formatSelection(m,l.find("div"));if(s!=Q){l.find("div").replaceWith("<div title='"+this.opts.escapeMarkup(s)+"'>"+this.opts.escapeMarkup(s)+"</div>")}if(n){l.find(".select2-search-choice-close").on("mousedown",F).on("click dblclick",this.bind(function(t){if(!this.isInterfaceEnabled()){return}S(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(S(t.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue();F(t)})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled()){return}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}))}l.data("select2-data",m);l.insertBefore(this.searchContainer);p.push(q);this.setVal(p)},unselect:function(o){var n=this.getVal(),l,m;o=o.closest(".select2-search-choice");if(o.length===0){throw"Invalid argument: "+o+". Must be .select2-search-choice"}l=o.data("select2-data");if(!l){return}m=X(this.id(l),n);if(m>=0){n.splice(m,1);this.setVal(n);if(this.select){this.postprocessResults()}}o.remove();this.opts.element.trigger({type:"removed",val:this.id(l),choice:l});this.triggerChange({removed:l})},postprocessResults:function(r,n,m){var p=this.getVal(),q=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),l=this;q.each2(function(s,t){var u=l.id(t.data("select2-data"));if(X(u,p)>=0){t.addClass("select2-selected");t.find(".select2-result-selectable").addClass("select2-selected")}});o.each2(function(s,t){if(!t.is(".select2-result-selectable")&&t.find(".select2-result-selectable:not(.select2-selected)").length===0){t.addClass("select2-selected")}});if(this.highlight()==-1&&m!==false){l.highlight(0)}if(!this.opts.createSearchChoice&&!q.filter(".select2-result:not(.select2-selected)").length>0){this.results.append("<li class='select2-no-results'>"+l.opts.formatNoMatches(l.search.val())+"</li>")}},getMaxSearchWidth:function(){return this.selection.width()-c(this.search)},resizeSearch:function(){var n,o,q,m,p,l=c(this.search);n=J(this.search)+10;o=this.search.offset().left;q=this.selection.width();m=this.selection.offset().left;p=q-(o-m)-l;if(p<n){p=q-l}if(p<40){p=q-l}if(p<=0){p=n}this.search.width(p)},getVal:function(){var l;if(this.select){l=this.select.val();return l===null?[]:l}else{l=this.opts.element.val();return e(l,this.opts.separator)}},setVal:function(m){var l;if(this.select){this.select.val(m)}else{l=[];S(m).each(function(){if(X(this,l)<0){l.push(this)}});this.opts.element.val(l.length===0?"":l.join(this.opts.separator))}},buildChangeDetails:function(m,n){var n=n.slice(0),m=m.slice(0);for(var l=0;l<n.length;l++){for(var o=0;o<m.length;o++){if(a(this.opts.id(n[l]),this.opts.id(m[o]))){n.splice(l,1);l--;m.splice(o,1);o--}}}return{added:n,removed:m}},val:function(p,l){var n,m=this,o;if(arguments.length===0){return this.getVal()}n=this.data();if(!n.length){n=[]}if(!p&&p!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(l){this.triggerChange({added:this.data(),removed:n})}return}this.setVal(p);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection));if(l){this.triggerChange(this.buildChangeDetails(n,this.data()))}}else{if(this.opts.initSelection===Q){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(r){var q=S(r).map(m.id);m.setVal(q);m.updateSelection(r);m.clearSearch();if(l){m.triggerChange(this.buildChangeDetails(n,this.data()))}})}this.clearSearch()},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var m=[],l=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){m.push(l.opts.id(S(this).data("select2-data")))});this.setVal(m);this.triggerChange()},data:function(p,l){var m=this,o,n;if(arguments.length===0){return this.selection.find(".select2-search-choice").map(function(){return S(this).data("select2-data")}).get()}else{n=this.data();if(!p){p=[]}o=S.map(p,function(q){return m.opts.id(q)});this.setVal(o);this.updateSelection(p);this.clearSearch();if(l){this.triggerChange(this.buildChangeDetails(n,this.data()))}}}});S.fn.select2=function(){var r=Array.prototype.slice.call(arguments,0),m,l,p,n,q=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","readonly","positionDropdown","data"],o=["val","opened","isFocused","container","data"];this.each(function(){if(r.length===0||typeof(r[0])==="object"){m=r.length===0?{}:S.extend({},r[0]);m.element=S(this);if(m.element.get(0).tagName.toLowerCase()==="select"){n=m.element.prop("multiple")}else{n=m.multiple||false;if("tags" in m){m.multiple=n=true}}l=n?new A():new V();l.init(m)}else{if(typeof(r[0])==="string"){if(X(r[0],q)<0){throw"Unknown method: "+r[0]}p=Q;l=S(this).data("select2");if(l===Q){return}if(r[0]==="container"){p=l.container}else{p=l[r[0]].apply(l,r.slice(1))}if(X(r[0],o)>=0){return false}}else{throw"Invalid arguments to select2 plugin: "+r}}});return(p===Q)?this:p};S.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(m,n,o,l){var p=[];B(m.text,o.term,p,l);return p.join("")},formatSelection:function(m,l){return m?m.text:Q},sortResults:function(n,l,m){return n},formatResultCssClass:function(l){return Q},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(o,l){var m=l-o.length;return"Please enter "+m+" more character"+(m==1?"":"s")},formatInputTooLong:function(m,o){var l=m.length-o;return"Please delete "+l+" character"+(l==1?"":"s")},formatSelectionTooBig:function(l){return"You can only select "+l+" item"+(l==1?"":"s")},formatLoadMore:function(l){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(l){return l.id},matcher:function(m,l){return(""+l).toUpperCase().indexOf((""+m).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:h,escapeMarkup:function(m){var l={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(m).replace(/[&<>"'\/\\]/g,function(n){return l[n]})},blurOnChange:false,selectOnBlur:false,adaptContainerCssClass:function(l){return l},adaptDropdownCssClass:function(l){return null}};S.fn.select2.ajaxDefaults={transport:S.ajax,params:{type:"GET",cache:false,dataType:"json"}};window.Select2={query:{ajax:I,local:i,tags:C},util:{debounce:P,markMatch:B},"class":{"abstract":b,"single":V,"multi":A}}}(jQuery));