List.prototype.plugins.fuzzySearch=function(D,B){var C=this;var A=function(W,U,V){function P(g,e){var b=g/U.length,h=Math.abs(Y-e);if(!x){return h?1:b}return b+h/x}var Z=V.location||0;var x=V.distance||100;var X=V.threshold||0.4;if(U===W){return true}if(U.length>32){return false}var Y=Z,O=function(){var d={};for(var b=0;b<U.length;b++){d[U.charAt(b)]=0}for(var b=0;b<U.length;b++){d[U.charAt(b)]|=1<<U.length-b-1}return d}();var M=X,N=W.indexOf(U,Y);if(N!=-1){M=Math.min(P(0,N),M);N=W.lastIndexOf(U,Y+U.length);if(N!=-1){M=Math.min(P(0,N),M)}}var S=1<<U.length-1;N=-1;var T,Q;var R=U.length+W.length;var G;for(var H=0;H<U.length;H++){T=0;Q=R;while(T<Q){if(P(H,Y+Q)<=M){T=Q}else{R=Q}Q=Math.floor((R-T)/2+T)}R=Q;var E=Math.max(1,Y-Q+1);var F=Math.min(Y+Q,W.length)+U.length;var K=Array(F+2);K[F+1]=(1<<H)-1;for(var L=F;L>=E;L--){var I=O[W.charAt(L-1)];if(H===0){K[L]=(K[L+1]<<1|1)&I}else{K[L]=(K[L+1]<<1|1)&I|((G[L+1]|G[L])<<1|1)|G[L+1]}if(K[L]&S){var J=P(H,L-1);if(J<=M){M=J;N=L-1;if(N>Y){E=Math.max(1,2*Y-N)}else{break}}}}if(P(H+1,Y)>M){break}G=K}return N<0?false:true};return function(){var E=function(G,U){C.i=1;var V,N,O=[],L,M,R,S,P,Q=typeof B.multiSearch!=="boolean"?true:B.multiSearch,U=U===undefined?C.items[0].values():U,G=G===undefined?"":G,I=G.target||G.srcElement;G=I===undefined?(""+G).toLowerCase():""+I.value.toLowerCase();P=C.items;V=Q?G.replace(/ +$/,"").split(/ +/):[G];D.templater.clear();if(G===""){D.reset.search();C.searched=false;C.update()}else{C.searched=true;for(var J=0,K=P.length;J<K;J++){L=true;M=P[J];S=M.values();for(var H=0;H<V.length;H++){N=false;for(var T in U){if(S.hasOwnProperty(T)&&U[T]!==null){R=S[T]!=null?S[T].toString().toLowerCase():"";if(A(R,V[H],B)){N=true}}}if(!N){L=false}}if(L){M.found=true;O.push(M)}else{M.found=false}}C.update()}return C.visibleItems},F;return function(){var I=this,G=arguments;var H=function(){F=null;E.apply(I,G)};clearTimeout(F);F=setTimeout(H,100)}}()};